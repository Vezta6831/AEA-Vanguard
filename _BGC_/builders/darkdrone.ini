
[core]
#original file from mega builer
copyFrom: ROOT:data\effects\repair_effect.template,ROOT:statusEffect.template,ROOT:/DATA/total/debuffs.template
name: darkdrone
altNames: roboshipBuilder1st 
class: CustomUnitMetadata
price: ${darkDrone}
maxHp: 500
mass: 4000

#maxShield: 100
#shieldRegen: 0.1


displayText: Builder Mech
displayDescription: -sent from space to aquire new rare ressources\n- "Your body shall be my shield now come here!" \n- Gains 1 maximum point of shield and durability for every attack\n- will no longer bite after 1000 bites
displayText_ru: Шагоход-Строитель
displayDescription_ru: - Послан из космоса за добычей редких ископаемых
displayText_zh: 建设者机甲
displayDescription_zh: -从太空传送过来，目的是采集新的稀有资源

techLevel: 1

buildSpeed: 0.001
availableInDemo: false

tags: darkdrone, AiBuilder, bio, mech, unit
 
radius: 15
displayRadius: 15
softCollisionOnAll: 7

isBio: false

isBuilder: true

#energyMax: 1
#energyRegen: 0.0015
#energyNeedsToRechargeToFull: true
#----------------Use for build decoy
energyMax: 1
energyRegen: 0.0001
#----------------

selfRegenRate:0.05
canRepairBuildings: true
canRepairUnits: false
autoRepair: false

nanoRange: 95
nanoBuildSpeed: 2.0
nanoRepairSpeed: 0.3
canReclaimResources: true



[hiddenAction_Ai_1stPlacementRule]
autoTriggerOnEvent: created
requireConditional: if self.isControlledByAI() and self.resource.t_seconds_a < (3) 
addWaypoint_target_fromReference: self.globalSearchForFirstUnit(withTag='gateway', relation='own').getOffsetRelative(x=-75)
addWaypoint_type: build
addWaypoint_unitType: mechGantry

[hiddenAction_AiDefendmeyouRetard]
autoTriggerOnEvent:newMessage(withTag='AiDefendPriority')
requireConditional: if self.isControlledByAI()
#clearAllWaypoints: true
addWaypoint_target_fromReference: createMarker(x=eventSource.x, y=eventSource.y, dir=direction(eventSource.x, eventSource.y, nearestUnit(relation='enemy').x, nearestUnit(relation='enemy').y)).getOffsetRelative(y=40)
addWaypoint_unitType: Pop_turret
addWaypoint_type: build

[hiddenAction_IAMBECOMESTRONGEST]
setUnitStats: maxHp+=1, maxShield+=1
isLocked: if self.maxHp(greaterThan=1499)

[canBuild_1]
name: reclaim
pos: -1
[canBuild_extractor]
name: DExtractorT1
pos: 1
[canBuild_2]
isVisible: if not self.hasFlag(id=10)
name: AA_turret, Pop_turret, snipah_turret, mechGantry
pos: 2
[canBuild_3]
isVisible: if not self.hasFlag(id=10)
isLocked: if self.numberOfUnitsInTeam(withTag='BGC_ResearchFacility')>0
isLockedMessage: You have built the maximum amount of Research Facility
isLockedMessage_ru: Больше одного исследовательского центра строить нельзя
isLockedMessage_zh:你已经建造了最大数量的研究设施
name: BGC_ResearchFacility
pos: 2
[canBuild_4]
isVisible: if not self.hasFlag(id=10)
name: drillT1
pos: 2
[canBuild_Flak]
isVisible: if not self.hasFlag(id=10)
isLocked: if not numberOfUnitsInTeam(greaterThan=0, withTag='BGC_ResearchFacility')
isLockedMessage: Requires Research Facility
isLockedMessage_ru: Необходим исследовательский центр
isLockedMessage_zh: 需要研究设施

name: flakgun
pos: 3.5
forceNano: true

[canBuild_ExGantry]
isVisible: if not self.hasFlag(id=10)
isLocked: if not numberOfUnitsInTeam(greaterThan=0, withTag='BGC_ResearchFacility')
isLockedMessage: Requires Research Facility
isLockedMessage_ru: Необходим исследовательский центр
isLockedMessage_zh: 需要研究设施
isLockedAlt: if not numberOfUnitsInTeam(greaterThan=0, withTag='unitResource')
isLockedAltMessage: Link disconnected!, Error code
isLockedAltMessage_ru: Связь с вратами нарушена!
isLockedAltMessage_zh: 断开连接!代码错误
isLockedAlt2: if self.isControlledByAI() and self.resource.uranium < (2) 
isLockedAlt2Message: Artifical inteligence prevents Ai from starting experiemental production without uranium.
name: BGC_ExperimentalGantry
pos:  14
forceNano: true

[canBuild_converter]
isVisible: if not self.hasFlag(id=10)
isLocked: if not numberOfUnitsInTeam(greaterThan=0, withTag='BGC_ResearchFacility')
isLockedMessage: Requires Research Facility
isLockedMessage_ru: Необходим исследовательский центр
isLockedMessage_zh: 需要研究设施
#isLockedAlt: if not self.globalTeamTags(includes='uConverter')
#isLockedAltMessage: Requires Converter research
#isLockedAltMessage_ru: Необходимо исследовать ресурсный разменник

name: Uconverter_S
pos:  14
forceNano: true

[canBuild_antinuke]
name: antiNukeLauncherBGC
pos: 15
forceNano: true
[action_DecoySt]
autoTrigger: if self.energy() < 0.1 and self.hasFlag(id=10) 
isActive: true
isVisible: if self.globalTeamTags(includes='decoyStructure')
buildSpeed: 0s
isGuiBlinking: if self.hasFlag(id=10) 
text: Decoy Structure
description: - Decoy structures also known as deception systems\n Creates a fake structures to attract oponent away from an \n enterprise's true assets and divert them to a decoy or trap\n-Note: \n>Structures has no collision, and easily destroyed\n>Offense structures such as turrets deals 0 damage
text_ru: Фальшивые Строения 
description_ru: - Технология ВГС, специализирующаяся на обмане и введении в заблуждение противника \n - Создает строение, по виду полностью повторяющее оригинал, на что и идет упор \n - Фальшивые строения по типу заводов не производят боевые единицы.  \n Примечания: \n > У строений нет коллизии, а значит, вражеские войска смогут спокойно проходить сквозь них \n > Атакующие строения не наносят никакого урона (Генератор взрывается, но тоже не наносит вреда)
text_zh: 诱饵建筑结构
description_zh: -诱饵建筑结构也被称为欺骗系统\n-构造一个假建筑结构，以吸引目标远离公司的真实资产，并将敌人转移到诱饵或陷阱中\n注意：\n>假建筑结构没有碰撞体积，并且很容易被摧毁\n>炮塔等攻击性假建筑结构只会造成0伤害

pos:21
highPriorityQueue: true
iconExtraImage: ROOT:data\icons\select.png
iconExtraIsVisible: if self.hasFlag(id=10) 
price: energy=0.1
addResources: setFlag=10, AAm=1, energy=0.1
alsoTriggerAction: unflag
[canBuild_decoys]
price: energy=0.1
isVisible: if self.hasFlag(id=10) 
name: decoy_AA_turret, decoy_Pop_turret, decoy_snipah_turret, decoy_flakgun, decoy_mechGantry, decoy_drillT1, decoy_BGC_ExperimentalGantry, decoy_Generator
forceNano: true
pos: 21
[hiddenAction_unflag]
requireConditional: if self.hasFlag(id=10) and self.resource(type='AAm', greaterThan=1)
addResources: unsetFlag=10, AAm=-2
[resource_AAm]
displayName: Eh
hidden: true
[graphics]

total_frames: 1
image:        darkdrone_b.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true


#Drawlayer
[attack]
isMelee: true
meleeEngangementDistance: 30
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
isFixedFiring: true
turretRotateWithBody: true
turretMultiTargeting:false
maxAttackRange: 16
shootDelay: 8
[turret_1]
x: 0
y: 0
shoot_sound:shred.ogg
shoot_sound_vol:0.1

shoot_light:#afafaf
onShoot_triggerActions:IAMBECOMESTRONGEST
canAttackCondition:if not self.maxHp(greaterThan=1499)
[turret_nano1]
#nano turret
x: 0
y: 10
attachedTo: 1
slave: true
invisible: true
canShoot: false
isMainNanoTurret: true
[projectile_1]
life: 50
instant: true
directDamage: 4
areaDamage: 1
areaRadius: 30
effectOnCreate: CUSTOM:railImpactSparks*2
explodeEffect: CUSTOM:railImpactSparks*5
[effect_railImpactSparks]
priority: verylow
image:ROOT:data\images\spark.png
life: 20
fadeOut: true
attachedToUnit: false
scaleFrom: 0.2
scaleTo: 0.3
alpha: 1.2
drawUnderUnits:false
atmospheric: true

xSpeedRelativeRandom: 1.5
ySpeedRelativeRandom: 1.5
dirSpeedRandom: 5

xOffsetRelativeRandom: 3
yOffsetRelativeRandom: 3
hOffset: 1


physics: true
physicsGravity: -0.1
[leg_1]
x: -12
y: 12
attach_x: -3
attach_y: 3
heightSpeed: 0.5
moveSpeed: 4
resetAngle:1
#rotateSpeed: 7
image_leg:  darkdrone_leg.png
#draw_foot_on_top: true
dust_effect: false
holdDisMin: 0.2
holdDisMax: 0.3
holdDisMin_maxMovingLegs: 3
estimatingPositionMultiplier: 0.4
hidden: if self.hasFlag(id=0)
[leg_2]
@copyFromSection: leg_1
x: 12
y: 12
attach_x: 3
attach_y: 3
[leg_3]
@copyFromSection: leg_1
x: -12
y: -12
attach_x: -3
attach_y: -3
estimatingPositionMultiplier: 0.6
[leg_4]
@copyFromSection: leg_1
x: 12
y: -12
attach_x: 3
attach_y: -3
estimatingPositionMultiplier: 0.6
[movement]
movementType: LAND
moveSpeed: 1.1
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.08

#targetHeight: 6
#targetHeightDrift: 1.5

maxTurnSpeed: 3
turnAcceleration: 0.1

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181

slowDeathFall: true
slowDeathFallSmoke: true
[ai]
useAsBuilder: true
useAsAttacker: false
buildPriority: 0.3

noneInBaseExtraPriority: 0.4

