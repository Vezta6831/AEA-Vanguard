[core]
copyFrom:ROOT:/DATA/total/forcesAttack.template, ROOT:/DATA/Protoss/protossUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: interceptor
tags:S,interceptor,haveShield,mech,unit
class: CustomUnitMetadata
price: 0
maxHp: 600
maxShield: 600
shieldRegen:0.075
shieldDisplayOnlyDeflection:true
mass: 300
displayText_ru: Перехватчик
displayText: Interceptor
techLevel: 1
buildSpeed: 11s
radius: 11
displayRadius: 13
softCollisionOnAll: 250
isBio: true
hideScorchMark: true
fogOfWarSightRange:17
canNotBeGivenOrdersByPlayer: true
showInEditor: false
effectOnDeath:CUSTOM:corpse

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 130
alpha: 13
image: ROOT:/DATA/Protoss/units/death.png
priority: critical
drawUnderUnits:false
total_frames:13
animateFrameStart:0
animateFrameEnd:12
animateFrameSpeed:0.2
frame_width:  78
frame_height: 65

[hiddenAction_armor]
autoTrigger: if self.resource(type='ProtossAirArmor',greaterThan=0) and not self.tags(includes='armor1')
temporarilyAddTags: armor1
setUnitStats: armour+=1

[hiddenAction_armor_2]
autoTrigger: if self.resource(type='ProtossAirArmor',greaterThan=1) and not self.tags(includes='armor2')
temporarilyAddTags: armor2
setUnitStats: armour+=1

[hiddenAction_armor_3]
autoTrigger: if self.resource(type='ProtossAirArmor',greaterThan=2) and not self.tags(includes='armor3')
temporarilyAddTags: armor3
setUnitStats: armour+=1

[graphics]
image_offsetY:-6
image:        interceptor.png
image_wreak:  NONE
image_turret: NONE
image_shadow: AUTO_ANIMATED
drawLayer: top
rotate_with_direction: false
animation_direction_units: 45
animation_direction_strideX:1
animation_direction_strideY:0
animation_direction_starting:180
frame_width:  32
frame_height: 32
imageScale: 1.8

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 70
shootDelay: 0.54s
isMelee: false
attackMovement: bomber
showRangeUIGuide:false

[turret_T1T2]
canAttackCondition: if self.resource(type='ProtossAirAttack',equalTo=0) or self.resource(type='ProtossAirAttack',equalTo=1)
x: 0
y: 0
shoot_sound:attack.ogg
shoot_sound_vol:0.25
recoilOffset: 0
projectile:T1
showRangeUIGuide:false
altProjectile: T2
altProjectileCondition: if self.resource(type='ProtossAirAttack',equalTo=1)

[turret_T3T4]
canAttackCondition: if self.resource(type='ProtossAirAttack',equalTo=2) or self.resource(type='ProtossAirAttack',equalTo=3)
@copyFromSection:turret_T1T2
projectile:T3
altProjectile: T4
altProjectileCondition: if self.resource(type='ProtossAirAttack',equalTo=3)

[projectile_T1]
directDamage: 85
life: 160
speed: 4
targetSpeed: 8
image:fire.png
explodeEffect: NONE
mutator1_ifUnitWithTags: zergSwarm
mutator1_directDamageMultiplier:0

[projectile_T2]
directDamage: 89
@copyFromSection:projectile_T1

[projectile_T3]
directDamage: 94
@copyFromSection:projectile_T1

[projectile_T4]
directDamage: 99
@copyFromSection:projectile_T1

[movement]
movementType: AIR
moveSpeed: 3.5
moveAccelerationSpeed: 2.5
moveDecelerationSpeed: 0
maxTurnSpeed: 4
#turnAcceleration: 40
reverseSpeedPercentage: 0
moveSlidingMode: false
slowDeathFall: false

[hiddenAction_attack]
autoTrigger: if customTarget1.hasActiveWaypoint(type="attack") and customTarget1.attacking != nullUnit and attacking != customTarget1.attacking and not self.hasActiveWaypoint(type="loadInto") and distanceBetween(customTarget1, customTarget1.attacking) <= 650 and distanceBetween(self, customTarget1) <= 700
addWaypoint_target_fromReference: customTarget1.attacking
addWaypoint_type: attack
clearAllWaypoints: true

[hiddenAction_disengage]
autoTrigger: if (distanceBetween(self, customTarget1) > 700 or distanceBetween(customTarget1, customTarget1.attacking) > 700 or not self.hasActiveWaypoint(type="attack") or customTarget1.resource.lockdown>0 or customTarget1.resource.stasis>0) and customTarget1 != nullUnit
addWaypoint_type: loadInto
#addWaypoint_prepend: true
addWaypoint_target_fromReference: unitRef customTarget1
addWaypoint_target_nearestUnit_team: own
clearAllWaypoints: true

[hiddenAction_ifCarrier_mindControl]
autoTrigger: if customTarget1.teamId!=self.teamId
switchToTeam: customTarget1.teamId

[hiddenAction_suicide]
autoTrigger: if customTarget1 == nullUnit
addResources:hp=-999

[hiddenAction_onDestroyed]
autoTriggerOnEvent: destroyed
takeResources: interceptor=-1
takeResources_includeUnitsWithinRange: 10000
takeResources_discardCollected: true
takeResources_includeReference: unitRef customTarget1

[ai]
lowPriorityTargetForOtherUnits: true

[resource_interceptor]
displayName_ru:Перехватчик
displayName:Interceptor
hidden:true

[hiddenAction_feedback_debuff]
@copyFrom_skipThisSection: true

[effect_feedback]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom_effect]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_maelstrom]
@copyFrom_skipThisSection: true

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:6
image:ROOT:/DATA/total/hp_p7.png
frame_width:22
frame_height:7
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14

[decal_shield]
@copyFromSection: template_customBar
@define totalFrames:6
image:ROOT:/DATA/total/shield_p7.png
frame_width:22
frame_height:7
frame:int((self.shield*100/self.maxShield)/(100/${totalFrames}))
yOffsetAbsolute:14