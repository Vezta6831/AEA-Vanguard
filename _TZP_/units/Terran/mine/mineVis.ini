[core]
ignoreInUnitCapCalculation:true
copyFrom:ROOT:/DATA/total/forcesAttack.template, ROOT:/DATA/total/customUI.template
disableAllUnitCollisions:true
showInEditor: false
name: mineVis
tags: massWeapons,S,landAttackTarget
class: CustomUnitMetadata
price:0
maxHp: 80
mass: 500
displayText_ru: Мина
displayText: Mine
techLevel: 1
buildSpeed: 0s
radius: 8
explodeOnDeath: false
hideScorchMark: true
displayRadius: 10
isBio: true
fogOfWarSightRange:6
isUnrepairableUnit: true
softCollisionOnAll: 12
transportSlotsNeeded: 9999
canNotBeGivenOrdersByPlayer: true
effectOnDeath:CUSTOM:corpse

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
hSpeed: 0
yOffsetAbsolute: -10
image: explode.png
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.3
alsoPlaySound:explode.ogg
frame_width:  80
frame_height: 80

[hiddenAction_goBackOnDamaged]
@copyFrom_skipThisSection:true

[hiddenAction_invis]
autoTrigger: if (numberOfUnitsInEnemyTeam(withTag='detector',withinRange=400)<1 and numberOfUnitsInEnemyTeam(withTag='detectorRange',withinRange=460)<1) and self.queueSize(lessThan=1)
convertTo:mineInvis

[hiddenAction_attack]
autoTrigger: IGNORE
alsoQueueAction: attack_2

[hiddenAction_attack_2]
highPriorityQueue: true
buildSpeed: 0.4s
whenBuilding_playAnimation: burrow
whenBuilding_cannotMove:true
canPlayerCancel:false
alsoQueueAction: attack_3

[hiddenAction_attack_3]
highPriorityQueue: true
buildSpeed: 0.6s
whenBuilding_playAnimation: stop
#whenBuilding_cannotMove:true
#whenBuilding_temporarilyConvertTo: mineAttack
canPlayerCancel:false
alsoTriggerAction: soundToAttack
convertTo:mineAttack

[hiddenAction_soundToAttack]
requireConditional: if self.isAttacking()
autoTrigger: IGNORE
playSoundAtUnit:attack.wav:0.3

[graphics]
total_frames: 12
icon_build: spiderMine_icon.png
image:        mine.png
image_wreak:  NONE
image_turret: NONE
image_shadow: AUTO_ANIMATED
shadowOffsetX:-2
shadowOffsetY:1
animation_moving_start: 11
animation_moving_end: 11
animation_moving_speed: 4
animation_idle_start: 11
animation_idle_end: 11
animation_idle_speed: 4
animation_attack_start: 11
animation_attack_end: 11
animation_attack_speed: 4
rotate_with_direction:false
lock_body_rotation_with_main_turret: false
drawLayer:experimentals

[attack]
canOnlyAttackUnitsWithoutTags: building, hover, stasis
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange: 120
isFixedFiring: true
#turretTurnSpeed: 999
shootDelay: 1.1s
showRangeUIGuide:false

[turret_attack]
showRangeUIGuide:false
x: 0
y: 0
projectile: null
recoilOffset:0
shoot_flame:NONE
onShoot_triggerActions: attack

[projectile_null]
directDamage: 0
life: 0
speed:0
invisible: true
explodeEffect:NONE
explodeEffectOnShield:NONE

[movement]
movementType: LAND
moveSpeed: 0
moveAccelerationSpeed: 20
moveDecelerationSpeed: 20
maxTurnSpeed: 20
turnAcceleration: 20
moveSlidingMode :false
moveIgnoringBody:false
reverseSpeedPercentage:0
joinsGroupFormations: false

[ai]
buildPriority: 0.8
noneInBaseExtraPriority: 0.8
noneGlobalExtraPriority: 0.8
maxEachBase: 10
upgradedFrom: mineInvis

[animation_burrow]
body_0s: {frame:11}
body_0.1s: {frame:10}
body_0.2s: {frame:9}
body_0.3s: {frame:8}
body_0.5s: {frame:8}

[animation_stop]
body_0s: {frame:0}
body_1s: {frame:0}

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:5
image:ROOT:/DATA/total/hp_6.png
frame_width:19
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14