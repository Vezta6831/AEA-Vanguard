[core]
ignoreInUnitCapCalculation:true
showInEditor: false
showOnMinimap:false
name: irradiate
tags:massWeapons,irradiate
displayText: Радиация
class: CustomUnitMetadata
price: 0
maxHp: 1000
armour: 999999
mass: 10000
techLevel: 1
radius: 0
isBio: true
transportSlotsNeeded: 9999
isUnrepairableUnit: true
explodeOnDeath: false
hideScorchMark: true
fogOfWarSightRange: 0
energyMax: 25
energyRegen: -0.016666666666666
dieOnZeroEnergy: true
softCollisionOnAll: 100
disableAllUnitCollisions:true
canNotBeDirectlyAttacked:true
createOnAggressiveTeam:true
stayNeutral:true
isUnselectable:true
autoTriggerCooldownTime: 0.1s

[hiddenAction_onCreated]
autoTriggerOnEvent:created
requireConditional: if nearestUnit(withTag="S",withinRange=50,relation="enemy") == nearestUnit(withinRange=50,relation="enemy") or nearestUnit(withTag="M",withinRange=50,relation="enemy") == nearestUnit(withinRange=50,relation="enemy") or nearestUnit(withTag="L",withinRange=50,relation="enemy") == nearestUnit(withinRange=50,relation="enemy")
setCustomTarget2: nearestUnit(withinRange=50,relation="enemy")

[hiddenAction_attackWaypoint]
autoTrigger: if customTarget2!=nullUnit
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_fromReference: unitRef customTarget2
addWaypoint_target_nearestUnit_team: enemy
clearAllWaypoints: true

[hiddenAction_kill]
autoTrigger:if self.timeAlive>=0.5 and customTarget2==nullUnit
deleteSelf:true

[graphics]
image:ROOT:/DATA/total/null.png
image_wreak:  NONE
image_shadow: NONE
showEnergyBar: false
drawLayer: top

[attack]
#canOnlyAttackUnitsWithTags:bio
canAttack: true
canAttackFlyingUnits: if customTarget2 != nullUnit and self.timeAlive>=0.5
canAttackLandUnits: if customTarget2 != nullUnit and self.timeAlive>=0.5
canAttackUnderwaterUnits: false
maxAttackRange: 9999
shootDelay:0.1s
aimOffsetSpread: 0

[turret_1]
canAttackCondition: if customTarget2 != nullUnit and self.timeAlive>=0.5 and attacking==customTarget2
x: 0
y: 0
projectile: 1

[projectile_1]
life:10
instant:true
invisible: true
areaDamage:1
areaRadius: 60
armourIgnoreAmount:100
teleportSource: true
explodeEffect:NONE
explodeEffectOnShield:NONE
areaHitAirAndLandAtSameTime: true
areaDamageNoFalloff: true
mutator1_ifUnitWithoutTags:bio
mutator1_directDamageMultiplier:0
mutator1_areaDamageMultiplier:0

[movement]
movementType: AIR
moveSpeed: 0
maxTurnSpeed: 20
turnAcceleration: 20
targetHeightDrift: 0
targetHeight: 5
startingHeightOffset: 5

[decal_irradiate]
@define frameStart: 0
@define totalFrames: 6
@define framesPerSec: 12
isVisible: if customTarget2!=nullUnit
basePosition: customTarget2
layer: beforeUI
image:irradiate.png
alwaysStartDirAtZero:true
teamColors:false
yOffsetAbsolute:-15
total_frames:6
frame: ${frameStart}+self.timeAlive*${framesPerSec}%${totalFrames}
onlyWhileAlive: true