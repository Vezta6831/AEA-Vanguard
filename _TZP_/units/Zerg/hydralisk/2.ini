[core]
copyFrom:ROOT:/DATA/Zerg/units/undergroundUnits.template, ROOT:/DATA/Zerg/zergUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: hydraliskUnderground
tags:M,bio,invis,undergroundZerg,canConsume,unit
canOnlyBeAttackedByUnitsWithTags:massWeapons
maxHp: 420
displayText_ru: Гидралиск
displayText: Hydralisk
displayRadius: 10
soundOnMoveOrder: hydralisk_order.ogg:0.3,hydralisk_order2.ogg:0.3,hydralisk_order3.ogg:0.3,hydralisk_order4.ogg:0.3
soundOnAttackOrder: hydralisk_order.ogg:0.3,hydralisk_order2.ogg:0.3,hydralisk_order3.ogg:0.3,hydralisk_order4.ogg:0.3
soundOnNewSelection:hydralisk_order.ogg:0.3,hydralisk_order2.ogg:0.3,hydralisk_order3.ogg:0.3,hydralisk_order4.ogg:0.3
showOnMinimapToEnemies: false

[hiddenAction_autoBurrow]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="unit",withinRange=100)>0 and self.queueSize<=0
alsoQueueAction:burrow_2
setBodyRotation: 0

[action_burrow]
setBodyRotation: 0

[hiddenAction_burrow_2]
convertTo: hydralisk
buildSpeed: 0.25s
whenBuilding_rotateTo:0
whenBuilding_temporarilyConvertTo: hydraliskUnderground2

[hiddenAction_detect]
autoTrigger: if self.queueSize<=0 and (numberOfUnitsInEnemyTeam(withTag='detector',withinRange=320)>0 or numberOfUnitsInEnemyTeam(withTag='detectorRange',withinRange=440)>0 or self.resource.d_matrix>0 or self.resource.maelstrom>0 or self.resource.stasis>0 or self.resource.ensnare>0 or self.resource.plague>0)
convertTo: hydraliskUnderground2

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 80
alpha: 8
image: death.png
priority: critical
drawUnderUnits: true
total_frames:8
animateFrameStart:0
animateFrameEnd:7
animateFrameSpeed:0.2
alsoPlaySound:death.wav

[graphics]
isVisibleToEnemies: false
image_offsetY:-8
total_frames: 5
icon_build: hydralisk_icon.png
image: burrow.png
image_wreak:  dead.png
image_turret: NONE
image_shadow: NONE
animation_moving_start: 0
animation_moving_end: 0
animation_moving_speed: 120
animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 120
animation_attack_start: 0
animation_attack_end: 0
animation_attack_speed: 6
showEnergyBar: false
lock_body_rotation_with_main_turret: true
drawLayer:experimentals
rotate_with_direction: false

[animation_burrow]
body_0s: {frame:0}
body_0.05s: {frame:1}
body_0.1s: {frame:2}
body_0.15s: {frame:3}
body_0.2s: {frame:4}
body_0.25s: {frame:4}

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:5
image:ROOT:/DATA/total/hp_6.png
frame_width:19
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14