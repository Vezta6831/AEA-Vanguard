[core]
copyFrom:ROOT:/DATA/total/forcesAttack.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
showInEditor:false
name: guardianCocoon
tags:L,canConsume
borrowResourcesWhileAlive:supply=2, displaySupply=-2
class: CustomUnitMetadata
price: 0
maxHp: 600
armour:10
energyMax: 20
energyRegen: -0.01666666666
mass: 500
displayText_ru: Страж
displayText: Guardian
techLevel: 1
buildSpeed: 0.005
#availableInDemo: true
radius: 20
hideScorchMark: true
displayRadius: 22
isBio: true
isBug: false
isUnrepairableUnit: true
selfRegenRate:0.01
softCollisionOnAll: 50
fogOfWarSightRange:17
explodeOnDeath: false
explodeOnDeathGroundCollosion: false
disableAllUnitCollisions:true
effectOnDeath:CUSTOM:corpse

[hiddenAction_life_Time]
autoTrigger: if self.queueSize(lessThan=1) and self.energy(empty=true)
playSoundToPlayer:buildEnd.wav
setBodyRotation:45
alsoQueueAction:life_Time_2

[hiddenAction_life_Time_2]
buildSpeed: 0.6s
whenBuilding_playAnimation:spawnGuardian
whenBuilding_cannotMove:true
convertTo: guardian
clearAllWaypoints:true

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 90
alpha: 9
hSpeed: 0
image: death.png
priority: critical
drawUnderUnits:false
total_frames:9
animateFrameStart:0
animateFrameEnd:8
animateFrameSpeed:0.2
alsoPlaySound:death.wav
scaleFrom:1
scaleTo: 1

[graphics]
image_offsetY:-10
icon_build: guardian_icon.png
image:        cocoonGuardian.png
image_wreak:  NONE
image_turret: NONE
image_shadow: AUTO_ANIMATED
animation_moving_start: 0
animation_moving_end: 8
animation_moving_speed: 6
animation_idle_start: 0
animation_idle_end: 8
animation_idle_speed: 6
showEnergyBar:false
lock_body_rotation_with_main_turret: true
rotate_with_direction:false
frame_width:  80
frame_height: 67

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
showRangeUIGuide:false
maxAttackRange:0

[movement]
movementType: AIR
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed: 0
turnAcceleration: 0
moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181
reverseSpeedPercentage:0
joinsGroupFormations: false
slowDeathFallSmoke: false
slowDeathFall: false

[ai]
buildPriority: 0.8
noneInBaseExtraPriority: 0.8
noneGlobalExtraPriority: 0.8
maxEachBase: 10
upgradedFrom: guardian

[animation_spawnCocoon]
body_0s: {frame:9}
body_0.1s: {frame:10}
body_0.2s: {frame:11}
body_0.3s: {frame:12}
body_0.4s: {frame:13}
body_0.55s: {frame:13}

[animation_spawnGuardian]
body_0s: {frame:14}
body_0.1s: {frame:15}
body_0.2s: {frame:16}
body_0.3s: {frame:17}
body_0.4s: {frame:18}
body_0.5s: {frame:19}
body_0.65s: {frame:19}

[decal_ensnare_goo]
image:ROOT:/DATA/total/ensnare_goo_2.png

[decal_plague_goo]
image:ROOT:/DATA/total/plague_goo_2.png

[decal_defensive_matrix]
image:ROOT:/DATA/total/defensive_matrix_2.png

[effect_mindControl]
image:ROOT:/DATA/total/mindControl_2.png
frame_width: 64
frame_height: 64

[hiddenAction_feedback_debuff]
@copyFrom_skipThisSection: true

[effect_feedback]
@copyFrom_skipThisSection: true

[decal_maelstrom]
image:ROOT:/DATA/total/maelstrom_2.png
frame_width:  64
frame_height: 64

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_med_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_med_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_med_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:7
image:ROOT:/DATA/total/hp_8.png
frame_width:25
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:19