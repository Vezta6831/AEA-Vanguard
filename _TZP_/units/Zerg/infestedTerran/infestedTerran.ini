[core]
copyFrom:ROOT:/DATA/Zerg/units/meleeUnits.template, ROOT:/DATA/Zerg/units/burrow.template, ROOT:/DATA/Zerg/zergUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: infTerran
tags:S,bio,canConsume,unit
price:Minerals=350,Gas=75
maxHp: 250
mass: 100
displayText_ru: Зараженный терран
displayText: Infected terran
displayDescription: -Fast moving, suicide bomber that inflicts devastating damage
buildSpeed: 16.7s
radius: 12
displayRadius: 14
explodeOnDeath: false
effectOnDeath:CUSTOM:corpse
soundOnAttackOrder:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3
soundOnMoveOrder:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3
soundOnNewSelection:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3

[hiddenAction_soundOnCreate]
autoTriggerOnEvent: created
requireConditional:if self.customTarget1!=nullUnit
playSoundToPlayer:spawn.wav
addWaypoint_type:move
addWaypoint_target_fromReference: customTarget1.readUnitMemory(name="rally",type="unit")

[action_burrow]
setBodyRotation: 45

[hiddenAction_burrow_2]
convertTo: InfestedTerranUnderGround
buildSpeed: 0.25s
whenBuilding_rotateTo:45

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 80
alpha: 8
image: death.png
priority: critical
drawUnderUnits: true
total_frames:8
animateFrameStart:0
animateFrameEnd:7
animateFrameSpeed:0.2
alsoPlaySound:death.wav

[effect_attack]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
hSpeed: 0
yOffsetAbsolute: -10
image: explode.png
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.3
alsoPlaySound:death.wav
frame_width:  80
frame_height: 80

[hiddenAction_kill]
autoTrigger: false
deleteSelf: true

[graphics]
image_offsetY:-11
icon_build: infestedTerran_icon.png
image:        infestedTerran.png
image_wreak:  dead.png
image_turret: NONE
image_shadow:ROOT:/DATA/total/shadow.png
animation_moving_start: 0
animation_moving_end: 7
animation_moving_speed: 3
drawLayer:experimentals
lock_body_rotation_with_main_turret: true
rotate_with_direction: false
animation_direction_units: 45
animation_direction_strideX:0
animation_direction_strideY:1
animation_direction_starting:180
frame_width:  64
frame_height: 64

[attack]
maxAttackRange: 10
turretSize:12
shootDelay: 2s

[turret_1]
x: 0
y: 0
onShoot_triggerActions: kill
shoot_flame:CUSTOM:attack

[projectile_1]
areaDamage: 9000
areaRadius:50
areaDamageNoFalloff: true
friendlyFire:true
targetGround:true
disableLeadTargeting: true
life: 0
speed: 0
invisible: true
explodeOnEndOfLife: true
explodeEffect:NONE
mutator1_ifUnitWithTags:M
mutator1_areaDamageMultiplier:0.75
mutator2_ifUnitWithTags:S
mutator2_areaDamageMultiplier:0.5
mutator3_ifUnitWithTags: stasis
mutator3_areaDamageMultiplier:0

[movement]
moveSpeed: 1.34
slowDeathFallSmoke: false
slowDeathFall: false

[animation_burrow]
body_0s: {frame:4}
body_0.05s: {frame:3}
body_0.1s: {frame:2}
body_0.15s: {frame:1}
body_0.2s: {frame:0}
body_0.25s: {frame:0}

[hiddenAction_feedback_debuff]
@copyFrom_skipThisSection: true

[effect_feedback]
@copyFrom_skipThisSection: true

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:5
image:ROOT:/DATA/total/hp_6.png
frame_width:19
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14