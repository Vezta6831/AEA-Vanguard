[core]
copyFrom:ROOT:/DATA/Zerg/units/undergroundUnits.template, ROOT:/DATA/Zerg/zergUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: InfestedTerranUnderGround2
tags:S,bio,undergroundZerg,canConsume,unit
maxHp: 40
displayText_ru: Зараженный терран
displayText: Infested terran
displayRadius: 10
soundOnAttackOrder:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3
soundOnMoveOrder:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3
soundOnNewSelection:infTerran_order.ogg:0.3,infTerran_order2.ogg:0.3,infTerran_order3.ogg:0.3,infTerran_order4.ogg:0.3

[action_burrow]
setBodyRotation: 45

[hiddenAction_burrow_2]
convertTo: infTerran
buildSpeed: 0.25s
whenBuilding_rotateTo:45

[hiddenAction_detect]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='detector',withinRange=320)<1 and numberOfUnitsInEnemyTeam(withTag='detectorRange',withinRange=440)<1 and self.queueSize<=0 and self.resource.d_matrix<=0 and self.resource.maelstrom<=0 and self.resource.stasis<=0 and self.resource.ensnare<=0 and self.resource.plague<=0
convertTo: InfestedTerranUnderGround

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 80
alpha: 8
image: death.png
priority: critical
drawUnderUnits: true
total_frames:8
animateFrameStart:0
animateFrameEnd:7
animateFrameSpeed:0.2
alsoPlaySound:death.wav

[graphics]
image_offsetY: -11
total_frames: 5
icon_build: infestedTerran_icon.png
image: burrow.png
image_wreak:  dead.png
image_turret: NONE
image_shadow: NONE
drawLayer:experimentals
showEnergyBar: false
lock_body_rotation_with_main_turret: true
rotate_with_direction: false

[ai]
upgradedFrom: InfestedTerranUnderGround

[animation_burrow]
body_0s: {frame:0}
body_0.05s: {frame:1}
body_0.1s: {frame:2}
body_0.15s: {frame:3}
body_0.2s: {frame:4}
body_0.25s: {frame:4}

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:5
image:ROOT:/DATA/total/hp_6.png
frame_width:19
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14