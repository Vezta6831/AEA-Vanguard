[core]
copyFrom:ROOT:/DATA/Zerg/units/undergroundUnits.template, ROOT:/DATA/Zerg/zergUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: zerglingUnderground
tags:S,bio,unit,invis,undergroundZerg,canConsume
canOnlyBeAttackedByUnitsWithTags:massWeapons
maxHp: 35
displayText_ru: Зерглинг 
displayText: Zergling
displayRadius: 10
soundOnMoveOrder: zergling_order.ogg:0.3,zergling_order2.ogg:0.3,zergling_order3.ogg:0.3,zergling_order4.ogg:0.3
soundOnAttackOrder: zergling_order.ogg:0.3,zergling_order2.ogg:0.3,zergling_order3.ogg:0.3,zergling_order4.ogg:0.3
soundOnNewSelection:zergling_order.ogg:0.3,zergling_order2.ogg:0.3,zergling_order3.ogg:0.3,zergling_order4.ogg:0.3
showOnMinimapToEnemies: false

[hiddenAction_autoBurrow]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="unit",withinRange=100)>0 and self.queueSize<=0
alsoQueueAction:burrow_2
setBodyRotation: 45

[action_burrow]
setBodyRotation: 45

[hiddenAction_burrow_2]
convertTo: zergling
buildSpeed: 0.25s
whenBuilding_rotateTo:45
whenBuilding_temporarilyConvertTo: zerglingUnderground2

[hiddenAction_detect]
autoTrigger: if self.queueSize<=0 and (numberOfUnitsInEnemyTeam(withTag='detector',withinRange=320)>0 or numberOfUnitsInEnemyTeam(withTag='detectorRange',withinRange=440)>0 or self.resource.d_matrix>0 or self.resource.maelstrom>0 or self.resource.stasis>0 or self.resource.ensnare>0 or self.resource.plague>0)
convertTo: zerglingUnderground2

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 70
alpha: 7
image: death.png
priority: critical
drawUnderUnits: true
total_frames:7
animateFrameStart:0
animateFrameEnd:6
animateFrameSpeed:0.2
alsoPlaySound:death.wav

[graphics]
isVisibleToEnemies: false
image_offsetY:-7
total_frames: 5
icon_build: zergling_icon.png
image: burrow.png
image_wreak:  dead.png
image_turret: NONE
image_shadow: NONE
drawLayer:experimentals
showEnergyBar: false
lock_body_rotation_with_main_turret: true
rotate_with_direction: false

[animation_burrow]
body_0s: {frame:0}
body_0.05s: {frame:1}
body_0.1s: {frame:2}
body_0.15s: {frame:3} 
body_0.2s: {frame:4}
body_0.25s: {frame:4}

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_smll_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_smll_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:5
image:ROOT:/DATA/total/hp_6.png
frame_width:19
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:14