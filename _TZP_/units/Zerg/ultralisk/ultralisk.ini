[core]
copyFrom:ROOT:/DATA/Zerg/units/meleeUnits.template, ROOT:/DATA/Zerg/zergUpgrades.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: ultralisk
tags:L,bio,canConsume,unit
price:Gas=2450
maxHp: 6500
armour:3
mass: 9999
displayText_ru: Ультралиск
displayText: Ultralisk
displayDescription: -Ground Juggernaught\n-An ABSOLUTE UNIT.\n-Inflicts high single target damage\n-Can be upgraded to move very fast
buildSpeed: 62s
radius: 32
displayRadius: 38
transportSlotsNeeded: 4
soundOnMoveOrder: ultralisk_order.ogg:0.3,ultralisk_order2.ogg:0.3,ultralisk_order3.ogg:0.3,ultralisk_order4.ogg:0.3
soundOnAttackOrder: ultralisk_order.ogg:0.3,ultralisk_order2.ogg:0.3,ultralisk_order3.ogg:0.3,ultralisk_order4.ogg:0.3
soundOnNewSelection:ultralisk_order.ogg:0.3,ultralisk_order2.ogg:0.3,ultralisk_order3.ogg:0.3,ultralisk_order4.ogg:0.3


[hiddenAction_repairForMedic]
autoTrigger: if not self.hp(full=true) and not self.tags(includes='repairInfantry')
temporarilyAddTags:repairInfantry

[hiddenAction_notRepairForMedic]
autoTrigger: if self.hp(full=true) and self.tags(includes='repairInfantry')
temporarilyRemoveTags:repairInfantry

[hiddenAction_soundOnCreate]
autoTriggerOnEvent: created
requireConditional:if self.customTarget1!=nullUnit
playSoundToPlayer:spawn.wav
addWaypoint_type:move
addWaypoint_target_fromReference: customTarget1.readUnitMemory(name="rally",type="unit")

[hiddenAction_speed]
autoTrigger: if self.globalTeamTags(includes='AnabolicSynthesis') and not self.tags(includes='speed')
temporarilyAddTags: speed
setUnitStats: moveSpeed+=0.35

[hiddenAction_armor_4]
autoTrigger: if self.globalTeamTags(includes='ChitinousPlating') and not self.tags(includes='armor4')
temporarilyAddTags: armor4
setUnitStats: armour+=6

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 50
alpha: 4
image: death.png
priority: critical
drawUnderUnits: true
total_frames:4
animateFrameStart:0
animateFrameEnd:3
animateFrameSpeed:0.2
alsoPlaySound:death.wav

[graphics]
image_offsetY:-7
icon_build: ultralisk_icon.png
image:       ultralisk.png
image_wreak:  dead.png
image_turret: NONE
image_shadow:ROOT:/DATA/total/shadow_3.png
animation_moving_start: 0
animation_moving_end: 9
animation_moving_speed: 3
animation_attack_start: 10
animation_attack_end: 14
animation_attack_speed: 5
lock_body_rotation_with_main_turret: true
drawLayer:experimentals
rotate_with_direction: false
animation_direction_units: 45
animation_direction_strideX:15
animation_direction_strideY:0
animation_direction_starting:180
frame_width:  108
frame_height: 108
imageScale:1.18

[attack]
shootDelay: 0.63s
turretSize:28

[turret_T1T2]
canAttackCondition: if (self.resource(type='ZergMeleeAttack',equalTo=0) or self.resource(type='ZergMeleeAttack',equalTo=1)) and numberOfUnitsInNeutralTeam(withTag='disruptionWeb',withinRange=120)<=0
x: 0
y: 0
shoot_sound:attack.wav,attack2.wav,attack3.wav
shoot_sound_vol:0.3
recoilOffset: 0
projectile:T1
showRangeUIGuide:false
onShoot_freezeBodyMovementFor:0.6s
altProjectile: T2
altProjectileCondition: if self.resource(type='ZergMeleeAttack',equalTo=1)

[turret_T3T4]
canAttackCondition: if (self.resource(type='ZergMeleeAttack',equalTo=2) or self.resource(type='ZergMeleeAttack',equalTo=3)) and numberOfUnitsInNeutralTeam(withTag='disruptionWeb',withinRange=120)<=0
@copyFromSection:turret_T1T2
projectile:T3
altProjectile: T4
altProjectileCondition: if self.resource(type='ZergMeleeAttack',equalTo=3)

[projectile_T1]
directDamage: 100
areaDamage: 280
areaRadius: 54
life: 10
instant:true
invisible: true
explodeEffect:NONE

[projectile_T2]
directDamage: 160
areaDamage: 330
@copyFromSection:projectile_T1

[projectile_T3]
directDamage: 170
areaDamage: 340
@copyFromSection:projectile_T1

[projectile_T4]
directDamage: 180
areaDamage: 350
@copyFromSection:projectile_T1

[movement]
moveSpeed: 1.45

[decal_ensnare_goo]
image:ROOT:/DATA/total/ensnare_goo_3.png

[decal_plague_goo]
image:ROOT:/DATA/total/plague_goo_3.png

[decal_defensive_matrix]
image:ROOT:/DATA/total/defensive_matrix_3.png

[effect_mindControl]
image:ROOT:/DATA/total/mindControl_3.png
frame_width: 128
frame_height: 128

[hiddenAction_debuff_ensnare]
setUnitStats: moveSpeed=${movement.moveSpeed}*0.5, shootDelayMultiplier=1.01

[hiddenAction_feedback_debuff]
@copyFrom_skipThisSection: true

[effect_feedback]
@copyFrom_skipThisSection: true

[decal_maelstrom]
image:ROOT:/DATA/total/maelstrom_3.png
frame_width:  128
frame_height: 128

[decal_stasis]
image:ROOT:/DATA/total/stasis_2.png
frame_width: 128
frame_height: 128

[effect_restoration]
image:ROOT:/DATA/total/restoration_2.png
frame_width: 128
frame_height: 128

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_lrg_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:16
image:ROOT:/DATA/total/hp_17.png
frame_width:52
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:26