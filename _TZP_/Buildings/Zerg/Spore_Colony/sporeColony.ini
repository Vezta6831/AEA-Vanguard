[core]
copyFrom:ROOT:/DATA/Zerg/buildings.template, ROOT:/DATA/total/customUI.template
name: SporeColony
tags:detector,building,main,landAttackTarget, creepColony
maxHp: 1100
armour:1
displayText_ru: Споровая колония
displayText: Spore colony
displayDescription_ru: ДЕТЕКТОР
displayDescription: -Detects invisible units\n-Strong AA defense\n-Attacks deal more damage to biological units
footprint: -1,-1,1,1
constructionFootprint:-1,-1,1,1
buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:0
radius: 40
soundOnNewSelection:SporeColony.ogg:0.3

[hiddenAction_spawnCreep]
autoTriggerOnEvent:created
spawnUnits: creep(offsetX=0,offsetY=0), creep(offsetX=70,offsetY=70), creep(offsetX=-70,offsetY=70), creep(offsetX=70,offsetY=-70), creep(offsetX=-70,offsetY=-70), creep(offsetX=0,offsetY=140,skipIfOverlapping=true), creep(offsetX=0,offsetY=-140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=0,skipIfOverlapping=true), creep(offsetX=140,offsetY=0,skipIfOverlapping=true), creep(offsetX=140,offsetY=140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=140,skipIfOverlapping=true), creep(offsetX=140,offsetY=-140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=-140,skipIfOverlapping=true), creep(offsetX=70,offsetY=210,skipIfOverlapping=true), creep(offsetX=-70,offsetY=210,skipIfOverlapping=true), creep(offsetX=70,offsetY=-210,skipIfOverlapping=true), creep(offsetX=-70,offsetY=-210,skipIfOverlapping=true), creep(offsetX=210,offsetY=70,skipIfOverlapping=true), creep(offsetX=-210,offsetY=70,skipIfOverlapping=true), creep(offsetX=210,offsetY=-70,skipIfOverlapping=true), creep(offsetX=-210,offsetY=-70,skipIfOverlapping=true), creep(offsetX=280,offsetY=0,skipIfOverlapping=true), creep(offsetX=-280,offsetY=0,skipIfOverlapping=true)

[hiddenAction_creep]
autoTrigger: true
takeResources: energy=-2
takeResources_includeUnitsWithinRange: 300
takeResources_excludeUnitsWithoutTags: creep
takeResources_discardCollected: true
takeResources_maxUnits: 60
takeResources_includeUnitsWithinRange_team: neutral

[action_Convert_T2]
convertTo: SporeColonyT2
price:Minerals=1000,Gas=275
buildSpeed: 35s
text: T2
description: Converts into T2 Turret
descriptionAddUnitStats: ${section.convertTo}
pos: 1

[decal_blood]
@copyFromSection: template_blood
isVisible: if self.hp<self.maxHp*0.85
image:ROOT:/DATA/Zerg/blood3.png
frame: select(self.hp<self.maxHp*0.75,6,0)+(self.timeAlive*12%6)
xOffsetAbsolute:25
yOffsetAbsolute:14

[decal_blood_2]
@copyFromSection: template_blood
isVisible: if self.hp<self.maxHp*0.65
image:ROOT:/DATA/Zerg/blood2.png
frame: select(self.hp<self.maxHp*0.55,6,0)+(self.timeAlive*12%6)
xOffsetAbsolute:-4
yOffsetAbsolute:-20

[action_clear]
addResources:hp=-1500

[effect_smoke]
alwayStartDirAtZero:true
attachedToUnit: false
life: 40
alpha: 8
image: smoke.png
priority: critical
drawUnderUnits: false
total_frames:7
animateFrameStart:0
animateFrameEnd:6
animateFrameSpeed:0.4
frame_width:  48
frame_height: 48

[effect_sparks2]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
hSpeed: 0
image: sparks.png
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.2

[graphics]
#image_offsetY:-13
total_frames: 4
imageScale: 1
image: sporeColony.png
image_back:   NONE
image_wreak:ROOT:/DATA/Zerg/dead.png
image_turret: NONE
drawLayer:experimentals
image_shadow:shadow.png
shadowOffsetX:1
shadowOffsetY:3
animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 8

[attack]
canAttack: true
canAttackFlyingUnits: true
turretSize: 0
turretTurnSpeed: 6
maxAttackRange: 330
shootDelay: 0.63s
showRangeUIGuide:false

[turret_1]
canAttackCondition: if numberOfUnitsInNeutralTeam(withTag='disruptionWeb',withinRange=120)<=0
x: -15
y: 20
shoot_sound: shoot.ogg
shoot_sound_vol:0.3
shoot_flame: NONE

[projectile_1]
trailEffect:CUSTOM:smoke
image: spore.png
directDamage: 60
life: 10
speed: 4
targetSpeed: 10
trailEffectRate:3
explodeEffect:CUSTOM:sparks2
explodeEffectOnShield:CUSTOM:sparks2
ballistic: true
ballistic_delaymove_height:30
ballistic_height: 30
spawnProjectilesOnEndOfLife:2

[projectile_2]
trailEffect:CUSTOM:smoke
image: spore.png
directDamage: 45
life: 80
speed: 8
targetSpeed: 12
trailEffectRate:4
explodeEffect:CUSTOM:sparks2
explodeEffectOnShield:CUSTOM:sparks2

[ai]
maxEachBase: 1
recommendedInEachBaseNum: 1
upgradedFrom: CocoonCreepColony

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_grn.png
yOffsetAbsolute:10

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_lrg_red.png
yOffsetAbsolute:10

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_yell.png
yOffsetAbsolute:10

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:16
image:ROOT:/DATA/total/hp_17.png
frame_width:52
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:36