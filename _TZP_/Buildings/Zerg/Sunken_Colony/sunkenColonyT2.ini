[core]
copyFrom:ROOT:/DATA/Zerg/buildings.template, ROOT:/DATA/total/customUI.template

name: SunkenColonyT2
tags:building,main,landAttackTarget, creepColony
maxHp: 2900
armour:2
displayText_ru: Подземная колония
displayText: Sunken colony T2
displayDescription: -Strong Ground defense
footprint: -1,-1,1,1
constructionFootprint:-1,-1,1,1
buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:0
radius: 40
soundOnNewSelection:SunkenColony.ogg:0.3

[hiddenAction_spawnCreep]
autoTriggerOnEvent:created
spawnUnits: creep(offsetX=0,offsetY=0), creep(offsetX=70,offsetY=70), creep(offsetX=-70,offsetY=70), creep(offsetX=70,offsetY=-70), creep(offsetX=-70,offsetY=-70), creep(offsetX=0,offsetY=140,skipIfOverlapping=true), creep(offsetX=0,offsetY=-140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=0,skipIfOverlapping=true), creep(offsetX=140,offsetY=0,skipIfOverlapping=true), creep(offsetX=140,offsetY=140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=140,skipIfOverlapping=true), creep(offsetX=140,offsetY=-140,skipIfOverlapping=true), creep(offsetX=-140,offsetY=-140,skipIfOverlapping=true), creep(offsetX=70,offsetY=210,skipIfOverlapping=true), creep(offsetX=-70,offsetY=210,skipIfOverlapping=true), creep(offsetX=70,offsetY=-210,skipIfOverlapping=true), creep(offsetX=-70,offsetY=-210,skipIfOverlapping=true), creep(offsetX=210,offsetY=70,skipIfOverlapping=true), creep(offsetX=-210,offsetY=70,skipIfOverlapping=true), creep(offsetX=210,offsetY=-70,skipIfOverlapping=true), creep(offsetX=-210,offsetY=-70,skipIfOverlapping=true), creep(offsetX=280,offsetY=0,skipIfOverlapping=true), creep(offsetX=-280,offsetY=0,skipIfOverlapping=true)

[hiddenAction_creep]
autoTrigger: true
takeResources: energy=-2
takeResources_includeUnitsWithinRange: 300
takeResources_excludeUnitsWithoutTags: creep
takeResources_discardCollected: true
takeResources_maxUnits: 60
takeResources_includeUnitsWithinRange_team: neutral

[action_Convert_T3]
convertTo: SunkenColonyT3
price:Minerals=2000,Gas=475
buildSpeed: 30s
text: T3
description: Converts into T3
descriptionAddUnitStats: ${section.convertTo}
pos: 1

[decal_blood]
@copyFromSection: template_blood
isVisible: if self.hp<self.maxHp*0.85
image:ROOT:/DATA/Zerg/blood3.png
frame: select(self.hp<self.maxHp*0.7,6,0)+(self.timeAlive*12%6)
xOffsetAbsolute:-5
yOffsetAbsolute:0

[decal_blood_2]
@copyFromSection: template_blood
isVisible: if self.hp<self.maxHp*0.55
image:ROOT:/DATA/Zerg/blood4.png
frame: select(self.hp<self.maxHp*0.4,6,0)+(self.timeAlive*12%6)
xOffsetAbsolute:-15
yOffsetAbsolute:-20

[action_clear]
addResources:hp=-1500

[effect_sparks]
alwayStartDirAtZero:true
attachedToUnit: false
yOffsetAbsolute: -8
life: 120
alpha: 12
image: spark.png
priority: critical
drawUnderUnits:false
total_frames:6
animateFrameStart:0
animateFrameEnd:5
animateFramePingPong:true
animateFrameSpeed:0.3

[graphics]
#image_offsetY:-10
image_offsetX:-10
imageScale: 1
image: sunkenColony.png
image_back:   NONE
image_wreak:ROOT:/DATA/Zerg/dead.png
image_turret: NONE
drawLayer:experimentals
image_shadow:shadow.png
shadowOffsetX:-2
shadowOffsetY:8
animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 8
animation_attack_start:4
animation_attack_end:18
animation_attack_speed:5
lock_body_rotation_with_main_turret: true
rotate_with_direction: false
frame_width:  96
frame_height: 80

[attack]
canAttack: true
canAttackLandUnits: true
turretSize: 8
turretTurnSpeed: 6
maxAttackRange: 320
shootDelay: 1.334s
showRangeUIGuide:false

[turret_1]
canAttackCondition: if numberOfUnitsInNeutralTeam(withTag='disruptionWeb',withinRange=120)<=0
x: -15
y: 20
shoot_sound: shoot.ogg
shoot_sound_vol:0.3
projectile: null

[projectile_null]
life:25
invisible: true
speed:0
directDamage:0
explodeEffect:NONE
explodeOnEndOfLife: true
spawnProjectilesOnExplode:1

[projectile_1]
life: 10
invisible: true
instant: true
directDamage:225
explodeEffect:CUSTOM:sparks
explodeEffectOnShield:CUSTOM:sparks
mutator1_ifUnitWithTags:M
mutator1_directDamageMultiplier:0.75
mutator2_ifUnitWithTags:S
mutator2_directDamageMultiplier:0.5
mutator3_ifUnitWithTags: zergSwarm
mutator3_directDamageMultiplier:0

[ai]
upgradedFrom: CocoonCreepColony
maxEachBase: 1
recommendedInEachBaseNum: 1

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_grn.png
yOffsetAbsolute:10

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_lrg_red.png
yOffsetAbsolute:10

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_lrg_yell.png
yOffsetAbsolute:10

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:16
image:ROOT:/DATA/total/hp_17.png
frame_width:52
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:36