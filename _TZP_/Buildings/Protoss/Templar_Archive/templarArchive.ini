[core]
copyFrom:ROOT:/DATA/total/baseAttack.template, ROOT:/DATA/Protoss/buildings.template, ROOT:/DATA/total/customUI.template
name:TemplarArchive
tags:TemplarArchive, building, haveShield
class: CustomUnitMetadata
price: 0
maxHp: 1600
maxShield:900
shieldRegen:0.065
shieldDisplayOnlyDeflection:true
mass: 9000
armour:1
hideScorchMark: false
fogOfWarSightRange:17
displayText_ru:Архивы тамплиеров
displayText:Templar archives
displayDescription: -Allows for Training of Templar from Gateway\n-Upgrades to Templar abilities
footprint: -2,-2,2,1
constructionFootprint:-2,-2,2,1
buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:0
techLevel: 1
buildSpeed: 1
selfBuildRate: 1
radius: 60
isBuilder: true
nanoRange: 0
isBuilding: true
isBio: true
numBitsOnDeath: 12
isUnrepairableUnit:false
soundOnNewSelection:TemplarArchive.ogg:0.3
effectOnDeath: CUSTOM:corpse

[decal_light]
@copyFromSection: template_light
image:templarArchive_light.png
frame_width:130
frame_height:150
yOffsetAbsolute:0

[decal_fire]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.85
image:ROOT:/DATA/Protoss/fire2.png
frame: select(self.hp<self.maxHp*0.75,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:6
yOffsetAbsolute:-5

[decal_fire_2]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.65
image:ROOT:/DATA/Protoss/fire.png
frame: select(self.hp<self.maxHp*0.55,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:-5
yOffsetAbsolute:-35

[decal_fire_3]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.50
image:ROOT:/DATA/Protoss/fire3.png
frame: select(self.hp<self.maxHp*0.40,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:32
yOffsetAbsolute:10

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
image: ROOT:/DATA/Protoss/death.png
alsoPlaySound:ROOT:/DATA/total/buildingExplode.wav
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.2
frame_width:  190
frame_height: 152


[action_psiStorm]
isVisible: if not self.globalTeamTags(includes='PsiStorm')
isActive: if not self.globalTeamTags(includes='PsiStorm') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:76s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Псионный шторм\n Позволяет Высшим тамплиерам применять мощное заклинание, наносящее урон юнитам по площади
description:Psionic storm\n Allows High Templar to cast a powerful spell damaging all units
price:Gas=400
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:ROOT:/DATA/Protoss/psistorm.png
allowMultipleInQueue:false
addGlobalTeamTags:PsiStorm
ai_isHighPriority:true

[action_khaydarinAmulet]
isVisible: if not self.globalTeamTags(includes='KhaydarinAmulet')
isActive: if not self.globalTeamTags(includes='KhaydarinAmulet') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:105s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Кайдариновый амулет\n Увеличивает лимит энергии Высшего тамплиера с 200 до 250 (+50)
description:Khaydarin amulet\n Increases High Templar energy limit to from 200 to 250 (+50)
price:Gas=200
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:khaydarinAmulet.png
allowMultipleInQueue:false
addGlobalTeamTags:KhaydarinAmulet
ai_isHighPriority:true

[action_mindControl]
isActive: if not self.globalTeamTags(includes='MindControl') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:76s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Подчинение\n Позволяет Тёмным архонам контролировать чужого юнита
description:Mind control\n Allows Dark Archon to irreversibly control another unit to the player casting the spell
price:Gas=500
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:ROOT:/DATA/Protoss/mindControl.png
allowMultipleInQueue:false
addGlobalTeamTags:MindControl
ai_isDisabled: true

[action_maelstrom]
isVisible: if not self.globalTeamTags(includes='Maelstrom')
isActive: if not self.globalTeamTags(includes='Maelstrom') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:63s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Водоворот\n Позволяет Темному Архонту временно замораживать любых органических юнитов
description:Maelstrom\n Allows Dark Archon to temporarily freeze all organic units
price:Gas=325
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:ROOT:/DATA/Protoss/maelstrom_icon.png
allowMultipleInQueue:false
addGlobalTeamTags:Maelstrom
ai_isDisabled: true

[action_argusTalisman]
isVisible: if not self.globalTeamTags(includes='ArgusTalisman')
isActive: if not self.globalTeamTags(includes='ArgusTalisman') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:105s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Талисман Аргуса\n Увеличивает лимит энергии Тёмного архона с 200 до 250 (+50)
description:Argus talisman\n Increases Dark Archon's energy limit to from 200 to 250 (+50)
price:Gas=250
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:argusTalisman.png
allowMultipleInQueue:false
addGlobalTeamTags:ArgusTalisman
ai_isDisabled:true

[hiddenAction_notWorking]
autoTrigger: if not self.hasUnitInTeam(withTag='pylon',withinRange=300) and self.tags(includes='TemplarArchive')
temporarilyRemoveTags:TemplarArchive
refundAllQueuedItems:true

[hiddenAction_Working]
autoTrigger: if self.hasUnitInTeam(withTag='pylon',withinRange=300) and not self.tags(includes='TemplarArchive')
temporarilyAddTags:TemplarArchive

[graphics]
image: templarArchive.png
image_wreak:  ROOT:/DATA/Protoss/dead2.png
drawLayer:experimentals
rotate_with_direction:false
image_shadow:shadow.png
shadowOffsetX:0
shadowOffsetY:0

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[movement]
movementType: NONE

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0.09
noneGlobalExtraPriority: 0.09
maxEachBase: 1
maxGlobal: 1
recommendedInEachBaseNum: 1
upgradedFrom: buildTemplarArchive

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:29
image:ROOT:/DATA/total/hp_p30.png
frame_width:91
frame_height:7
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:41

[decal_shield]
@copyFromSection: template_customBar
@define totalFrames:29
image:ROOT:/DATA/total/shield_p30.png
frame_width:91
frame_height:7
frame:int((self.shield*100/self.maxShield)/(100/${totalFrames}))
yOffsetAbsolute:41