[core]
copyFrom:ROOT:/DATA/total/baseAttack.template, ROOT:/DATA/Protoss/buildings.template, ROOT:/DATA/total/customUI.template
name:FleetBeacon
tags:FleetBeacon,building,haveShield
class: CustomUnitMetadata
price: 0
maxHp: 4000
maxShield:2500
shieldRegen:0.74
shieldDisplayOnlyDeflection:true
mass: 9000
armour:1
hideScorchMark: false
fogOfWarSightRange:17
displayText_ru:Маяк флотилии
displayText:Fleet beacon
displayDescription: -Allows construction of the Carrier\n-Contains upgrades for most air units
footprint: -2,-2,3,1
constructionFootprint:-2,-2,3,1
buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:-10
techLevel: 1
buildSpeed: 1
selfBuildRate: 1
radius: 70
isBuilder: true
nanoRange: 0
isBuilding: true
isBio: true
numBitsOnDeath: 12
isUnrepairableUnit:false
soundOnNewSelection:FleetBeacon.ogg:0.3
effectOnDeath: CUSTOM:corpse

[decal_light]
@copyFromSection: template_light
image:fleetBeacon_light.png
frame_width:192
frame_height:160
yOffsetAbsolute:-5

[decal_fire]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.85
image:ROOT:/DATA/Protoss/fire2.png
frame: select(self.hp<self.maxHp*0.75,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:-22
yOffsetAbsolute:-16

[decal_fire_2]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.65
image:ROOT:/DATA/Protoss/fire.png
frame: select(self.hp<self.maxHp*0.55,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:0
yOffsetAbsolute:-59

[decal_fire_3]
@copyFromSection: template_fire
isVisible: if self.hp<self.maxHp*0.50
image:ROOT:/DATA/Protoss/fire3.png
frame: select(self.hp<self.maxHp*0.40,12,0)+(self.timeAlive*12%12)
xOffsetAbsolute:37
yOffsetAbsolute:-38

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
image: ROOT:/DATA/Protoss/death.png
alsoPlaySound:ROOT:/DATA/total/buildingExplode.wav
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.2
frame_width:  190
frame_height: 152



[hiddenAction_notWorking]
autoTrigger: if not self.hasUnitInTeam(withTag='pylon',withinRange=300) and self.tags(includes='FleetBeacon')
temporarilyRemoveTags:FleetBeacon
refundAllQueuedItems:true

[hiddenAction_Working]
autoTrigger: if self.hasUnitInTeam(withTag='pylon',withinRange=300) and not self.tags(includes='FleetBeacon')
temporarilyAddTags:FleetBeacon

[action_disruptionWeb]
isVisible: if not self.globalTeamTags(includes='DisruptionWeb')
isActive: if not self.globalTeamTags(includes='DisruptionWeb') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:80s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Дестабилизирующая сеть\n Позволяет Корсарам использовать Дестабилизирующую сеть, которая предотвращает атаку наземных юнитов и зданий, находящихся под ней
description:Disruption web\n Allow to Corsairs used Disruption web, which reventing all units and buildings under it from attacking
price:Minerals=175,Gas=75
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:ROOT:/DATA/Protoss/disruptionWeb.png
allowMultipleInQueue:false
addGlobalTeamTags:DisruptionWeb
ai_isHighPriority:true

[action_argusJewel]
isVisible: if not self.globalTeamTags(includes='ArgusJewel')
isActive: if not self.globalTeamTags(includes='ArgusJewel') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:105s
displayType: upgrade
text:Upgrade
description:Argus jewel\n Increases Corsair's maximum energy to from 200 to 250 (+50) and starting energy by 12
price:Minerals=125,Gas=75
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:argusJewel.png
allowMultipleInQueue:false
addGlobalTeamTags:ArgusJewel
ai_isHighPriority:true

[action_carrierCapacity]
isVisible: if not self.globalTeamTags(includes='CarrierCapacity')
isActive: if not self.globalTeamTags(includes='CarrierCapacity') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:63s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Вместимоть авианосца\n Увеличивает максимальное число перехватчиков для Авианосца с 4 до 8
description:Carrier capacity\n Increases the maximum number of Interceptor per Carrier from 20 to 26.
price:Gas=700
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage: carrierCapacity.png
allowMultipleInQueue:false
addGlobalTeamTags:CarrierCapacity
ai_isHighPriority:true

[action_graviticThrusters]
isVisible: if not self.globalTeamTags(includes='GraviticThrusters')
isActive: if not self.globalTeamTags(includes='GraviticThrusters') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:105s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Гравитационные ускорители\n Увеличивает скорость Разведчиков
description:Gravitic thrusters\n Increases Scout movement speed
price:Minerals=350,Gas=175
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:scoutSpeed.png
allowMultipleInQueue:false
addGlobalTeamTags:GraviticThrusters
ai_isHighPriority:true

[action_apialSensors]
isVisible: if not self.globalTeamTags(includes='ApialSensors')
isActive: if not self.globalTeamTags(includes='ApialSensors') and self.hasUnitInTeam(withTag='pylon',withinRange=300)
buildSpeed:105s
displayType: upgrade
text_ru:Улучшение
text:Upgrade
description_ru:Апикальные сенсоры\n Увеличивает радиус обзора Разведчиков
description:Apial sensors\n Increases Scouts' sight range
price:Minerals=225,Gas=100
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5
onlyOneUnitAtATime: true
iconImage:apialSensors.png
allowMultipleInQueue:false
addGlobalTeamTags:ApialSensors
ai_isHighPriority:true

[graphics]
image_offsetY:-5
image: fleetBeacon.png
image_back:   NONE
image_wreak:  ROOT:/DATA/Protoss/dead2.png
image_turret: NONE
drawLayer:experimentals
rotate_with_direction:false
image_shadow:shadow.png
shadowOffsetX:0
shadowOffsetY:-5

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[movement]
movementType: NONE

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0.09
noneGlobalExtraPriority: 0.09
maxEachBase: 1
maxGlobal: 1
recommendedInEachBaseNum: 1
upgradedFrom: buildFleetBeacon

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn_2.png
yOffsetAbsolute:5

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red_2.png
yOffsetAbsolute:5

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell_2.png
yOffsetAbsolute:5

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:35
image:ROOT:/DATA/total/hp_p36.png
frame_width:109
frame_height:7
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:55

[decal_shield]
@copyFromSection: template_customBar
@define totalFrames:35
image:ROOT:/DATA/total/shield_p36.png
frame_width:109
frame_height:7
frame:int((self.shield*100/self.maxShield)/(100/${totalFrames}))
yOffsetAbsolute:55