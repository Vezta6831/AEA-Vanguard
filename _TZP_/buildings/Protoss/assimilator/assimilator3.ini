
[core]
copyFrom:ROOT:/DATA/total/customUI.template
showOnMinimap:false
canNotBeDirectlyAttacked:false
name: Assimilator3
tags:Extractor,resources
class: CustomUnitMetadata
price:localGas=2874251
maxHp: 2400
mass: 900
armour: 0
hideScorchMark: true
fogOfWarSightRange:8
displayText_ru:Ассимилятор
displayText:Assimilator T3
displayDescription: -3 workers max
footprint: -2,-2,3,1
constructionFootprint:-2,-2,3,1
buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:-10
techLevel: 1
buildSpeed: 1
selfBuildRate: 1
radius: 70
isBuilding: true
isBio: true
resourceRate: 0.000025
isUnrepairableUnit: true
resourceMaxConcurrentReclaimingThis: 3
similarResourcesHaveTag: Extractor
placeOnlyOnResPool: true
soundOnNewSelection:assimilator.ogg:0.3
effectOnDeath: CUSTOM:corpse

[action_Convert_T4]
convertTo: Assimilator4
price:Gas=180
buildSpeed: 55s
text: T4
description: Increase max workers to 4
descriptionAddUnitStats: ${section.convertTo}
pos: 1
playSoundToPlayer:ROOT:/DATA/Protoss/research.ogg:0.5

[template_light]
layer: afterBody
onlyOnNonPreview:true
alwaysStartDirAtZero:true
teamColors:false
isVisible: if self.lastConverted<=1.9
frame: select(self.lastConverted<=1.05,self.lastConverted*20%22,21)
#frameStart+self.lastConverted*framesPerSec%totalFrames
alpha: 1.8-(self.lastConverted*0.85)
onlyWhileAlive: true

[decal_light]
@copyFromSection: template_light
image:assimilator_light.png
frame_width:192
frame_height:192
yOffsetAbsolute:10

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
image: ROOT:/DATA/Protoss/death.png
alsoPlaySound:ROOT:/DATA/total/buildingExplode.wav
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.2
frame_width:  190
frame_height: 152

[hiddenAction_notWorking]
autoTrigger: if self.hp(lessThan=4)
convertTo:AssimilatorNotWorking

[hiddenAction_gas]
autoTrigger:if self.hp(greaterThan=0) and self.customTimer(laterThanSeconds=5)
spawnEffects:CUSTOM:gas
resetCustomTimer:true

[hiddenAction_campaignAddGasAI]
autoTrigger: if self.isControlledByAi() and self.globalTeamTags(includes="Campaign")
addResources:hp=-0.25
addResourcesScaledByAIHandicaps:Gas=8

[effect_gas]
xOffsetRelative:30
yOffsetRelative:63
alwayStartDirAtZero:true
attachedToUnit: false
life: 80
alpha: 8
hSpeed: 0
image: ROOT:/DATA/total/gas.png
priority: critical
drawUnderUnits:false
total_frames:8
animateFrameStart:0
animateFrameEnd:7
animateFrameSpeed:0.15
scaleFrom:1
scaleTo: 1

[graphics]
image_offsetY:10
showHealthBar:false
showEnergyBar:false
image: assimilator.png
image_wreak: ROOT:/DATA/Protoss/dead2.png
drawLayer:experimentals
image_shadow:shadow.png
shadowOffsetX:0
shadowOffsetY:10

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[movement]
movementType: NONE

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0
noneGlobalExtraPriority: 0.09
maxEachBase: 3
recommendedInEachBaseNum: 1
upgradedFrom: buildAssimilator

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn_2.png
yOffsetAbsolute:5

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red_2.png
yOffsetAbsolute:5

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell_2.png
yOffsetAbsolute:5