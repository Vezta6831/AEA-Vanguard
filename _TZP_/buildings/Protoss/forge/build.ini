[core]
copyFrom:ROOT:/DATA/Protoss/build.template,ROOT:/DATA/total/baseAttack.template, ROOT:/DATA/total/customUI.template
name: buildForge
tags:building, buildingPortal, haveShield, BuildForge
price:Gas=110
maxHp: 1200
maxShield:650
energyMax:25
generation_resources:energy=-0.25, hp=5.98, shield=5.98
generation_delay:10
armour:1
displayText_ru:Оружейная
displayText:Forge
footprint: -2,-2,2,1
constructionFootprint:-2,-2,2,1
buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:0
radius: 60

[hiddenAction_soundOnCreate]
addResources:hp=-547,shield=-547
alsoTriggerAction: photonProtoss

[hiddenAction_photonProtoss]
requireConditional: if self.globalTeamTags(includes='ProtossPhoton')
takeResources: select=-1
takeResources_includeUnitsWithinRange: 9999
takeResources_excludeUnitsWithoutTags: probe
takeResources_discardCollected: true
takeResources_maxUnits: 1

[action_clear]
addResources:hp=-3000,shield=-3000,Gas=90

[hiddenAction_evolveTime]
addResources:hp=22,shield=22

[hiddenAction_life_Time]
convertTo: Forge

[graphics]
icon_build: forge_icon.png

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0.09
noneGlobalExtraPriority: 0.09
maxEachBase: 2
maxGlobal: 2
recommendedInEachBaseNum: 1

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn.png

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red.png

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell.png

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:29
image:ROOT:/DATA/total/hp_p30.png
frame_width:91
frame_height:7
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:41

[decal_shield]
@copyFromSection: template_customBar
@define totalFrames:29
image:ROOT:/DATA/total/shield_p30.png
frame_width:91
frame_height:7
frame:int((self.shield*100/self.maxShield)/(100/${totalFrames}))
yOffsetAbsolute:41

[decal_fullConstuction]
onlyPlayersWithUnitControl:true
onlyTeam:ally
layer: afterBody
total_frames:4
image: forge.png
teamColors:true
onlyInPreview: true