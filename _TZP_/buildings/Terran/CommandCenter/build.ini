[core]
copyFrom:ROOT:/DATA/total/baseAttack.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
name: buildCommandCenter
tags:build,building, CC
class: CustomUnitMetadata
price:Gas=125
maxHp: 3200
mass: 9000
armour:1
energyMax:75
energyRegen:0
generation_resources:energy=-0.25,hp=5.15
generation_delay:10
generation_active: if self.numberOfAttachedUnits(withTag='scv', greaterThan=0)
buildSpeed:15.5s
hideScorchMark: false
fogOfWarSightRange:8
displayText_ru:Командный центр
displayText:Command center
displayDescription:Generates 1+ minerals
footprint: -3,-2,2,2
constructionFootprint:-3,-2,2,2
buildingToFootprintOffsetX:0
buildingToFootprintOffsetY:0
exit_x:60
exit_y:40
techLevel: 1
selfBuildRate:1
radius: 70
isBuilder: true
nanoRange: 0
isBuilding: true
isBio: true
numBitsOnDeath: 12
isUnrepairableUnit: true
effectOnDeath:CUSTOM:corpse
maxTransportingUnits: 1
transportUnitsCanUnloadUnits: false
transportUnitsAddUnloadOption: false
transportUnitsRequireTag: scv

[placementRule_notFarFromCrystals]
searchTags: resources
searchDistance: 125
maxCount: 0
cannotPlaceMessage_ru: Здесь нельзя строить!
cannotPlaceMessage: You can't build it here!
searchTeam: neutral



[hiddenAction_killInvisibleSCV]
autoTrigger: if self.numberOfAttachedUnits(withTag='scv',greaterThan=1)
deleteNumUnitsFromTransport:1

[hiddenAction_killIfAI]
autoTrigger: if self.numberOfAttachedUnits(withTag='scv', lessThan=1) and self.isControlledByAI() and self.timeAlive(laterThanSeconds=1)
addResources:hp=-9999,Minerals=400

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 120
alpha: 12
image:ROOT:/DATA/Terran/death.png
alsoPlaySound:ROOT:/DATA/total/buildingExplode.wav
priority: critical
drawUnderUnits:false
animateFrameStart:0
animateFrameEnd:11
animateFrameSpeed:0.2
frame_width:  252
frame_height: 200

[hiddenAction_onCreate]
autoTriggerOnEvent:completeAndActive
addResources:hp=-1497,energy=-1
alsoTriggerAction: spawnSCV

[hiddenAction_spawnSCV]
autoTrigger:false
addUnitsIntoTransport: scv

[attachment_scv]
x: ${core.radius*0.7}
y: -${core.radius*0.7}
isUnselectable: false
canBeAttackedAndDamaged: true
addTransportedUnits: true
setDrawLayerOnTop:true
canAttack: false
lockRotation: true
idleDir:-45
deattachIfWantingToMove:true
keepAliveWhenParentDies:true

[action_clear]
isVisible:true
isActive:true
buildSpeed:1s
price:0
text_ru:Уничтожить
text:Delete
iconImage:ROOT:/DATA/total/delete.png
addResources:hp=-3000,Minerals=300
ai_isDisabled:true

[hiddenAction_build]
autoTrigger: if self.energy(lessThan=66) and self.energy(greaterThan=64)
setBodyRotation: 90

[hiddenAction_build_2]
autoTrigger: if self.energy(lessThan=57) and self.energy(greaterThan=55)
setBodyRotation: 180

[hiddenAction_build_3]
autoTrigger: if self.energy(lessThan=48) and self.energy(greaterThan=46)
setBodyRotation: 360

[hiddenAction_build_4]
autoTrigger: if self.energy(lessThan=39) and self.energy(greaterThan=37)
setBodyRotation: 270

[hiddenAction_build_5]
autoTrigger: if self.energy(lessThan=30) and self.energy(greaterThan=28)
setBodyRotation: 90

[hiddenAction_build_6]
autoTrigger: if self.energy(lessThan=21) and self.energy(greaterThan=19)
setBodyRotation: 180

[hiddenAction_build_7]
autoTrigger: if self.energy(lessThan=12) and self.energy(greaterThan=10)
setBodyRotation: 360

[hiddenAction_build_8]
autoTrigger: if self.energy(lessThan=1)
setBodyRotation: -90
convertTo: CommandCenterSC

[effect_light]
alwayStartDirAtZero:true
attachedToUnit: false
life: 100
alpha: 10
hSpeed: 0
image: ROOT:/DATA/Terran/light.png
priority: critical
drawUnderUnits:false
total_frames:10
animateFrameStart:0
animateFrameEnd:9
animateFrameSpeed:0.2
scaleFrom:1
scaleTo: 1

[graphics]
#image_offsetY:-10
total_frames: 1
icon_build: commandCenter_icon.png
image:        build_1.png
image_back:   NONE
image_wreak:ROOT:/DATA/Terran/dead2.png
image_turret: NONE
drawLayer:experimentals
showEnergyBar:false
showTransportBar:false
rotate_with_direction:false
animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 18

[arm_3]
hidden: if self.energy(greaterThan=21)
x:0
y:0
image_end:build_4.png
image_end_teamColors:true
drawOverBody:true
lockMovement: false
rotateSpeed: 0

[arm_2]
hidden: if self.energy(greaterThan=39)
image_end:build_3.png
@copyFromSection: arm_3

[arm_1]
hidden: if self.energy(greaterThan=57)
image_end:build_2.png
@copyFromSection: arm_3

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
turretSize: 0
turretTurnSpeed: 6
maxAttackRange: 0
shootDelay: 80

[movement]
movementType: BUILDING

[ai]
buildPriority: 0.11
noneInBaseExtraPriority: 0.11
noneGlobalExtraPriority: 0.11
maxEachBase: 1
recommendedInEachBaseNum: 1

[hiddenAction_debuff_ensnare]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_ensnare]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_lockdown]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_lockdown]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_stasis]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_stasis]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom_effect]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_maelstrom]
@copyFrom_skipThisSection: true

[decal_ensnare_goo]
@copyFrom_skipThisSection: true

[decal_plague_goo]
image:ROOT:/DATA/total/plague_goo_3.png

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn_2.png
yOffsetAbsolute:5

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red_2.png
yOffsetAbsolute:5

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell_2.png
yOffsetAbsolute:5

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:35
image:ROOT:/DATA/total/hp_36.png
frame_width:109
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:54

[decal_fullConstuction]
onlyPlayersWithUnitControl:true
onlyTeam:ally
layer: afterBody
frame_width:  128
frame_height: 160
image: commandCenter.png
teamColors:true
onlyInPreview: true