[core]
copyFrom: ROOT:/DATA/total/customUI.template
showOnMinimap:false
canNotBeDirectlyAttacked:false
name: Refinery
tags:Extractor,Refinery,resources
class: CustomUnitMetadata
price:localGas=2874251
maxHp: 2400
mass: 9000
armour: 1
hideScorchMark: false
fogOfWarSightRange:8
displayText_ru:Перерабатывающий завод
displayText:Refinery
displayDescription: Allows 1 worker to mine gas
footprint: -2,-2,3,1
constructionFootprint:-2,-2,3,1
buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:-10
exit_x:0
exit_y:20
techLevel: 1
buildSpeed: 1
selfBuildRate: 1
radius: 70
isBuilding: true
isBio: true
resourceRate: 0.000025
isUnrepairableUnit: true
placeOnlyOnResPool: true
resourceMaxConcurrentReclaimingThis: 1
similarResourcesHaveTag: Extractor
soundOnNewSelection:Refinery.ogg:0.3
effectOnDeath:CUSTOM:corpse

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 120
alpha: 12
image:ROOT:/DATA/Terran/death.png
alsoPlaySound:ROOT:/DATA/total/buildingExplode.wav
priority: critical
drawUnderUnits:false
animateFrameStart:0
animateFrameEnd:11
animateFrameSpeed:0.2
frame_width:  252
frame_height: 200


[action_Convert_T2]
convertTo: RefineryT2
price:Gas=30
buildSpeed: 20s
text: T2
description: Increase max workers to 2
descriptionAddUnitStats: ${section.convertTo}
pos: 1


[hiddenAction_notWorking]
autoTrigger: if self.hp(lessThan=4)
convertTo:RefineryNotWorking

[hiddenAction_gas]
autoTrigger:if self.hp(greaterThan=0) and self.customTimer(laterThanSeconds=5)
spawnEffects:CUSTOM:gas
resetCustomTimer:true

[hiddenAction_campaignAddGasAI]
autoTrigger: if self.isControlledByAi() and self.globalTeamTags(includes="Campaign")
addResources:hp=-0.25
addResourcesScaledByAIHandicaps:Gas=8

[effect_gas]
xOffsetRelative:8
yOffsetRelative:50
alwayStartDirAtZero:true
attachedToUnit: false
life: 80
alpha: 8
hSpeed: 0
image: ROOT:/DATA/total/gas.png
priority: critical
drawUnderUnits:false

total_frames:8
animateFrameStart:0
animateFrameEnd:7
animateFrameSpeed:0.15
scaleFrom:1
scaleTo:1

[graphics]
image_offsetY:12
showHealthBar:false
showEnergyBar:false
total_frames: 1
imageScale: 1
image: refinery.png
image_back:   NONE
image_wreak:ROOT:/DATA/Terran/dead.png
image_turret: NONE
drawLayer:experimentals
image_shadow:shadow.png
shadowOffsetX:0
shadowOffsetY:12
animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 36

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 6


maxAttackRange: 0
shootDelay: 80

[movement]
movementType: BUILDING

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0.09
noneGlobalExtraPriority: 0.09
maxEachBase: 3
recommendedInEachBaseNum: 1
upgradedFrom: buildRefinery

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn_2.png
yOffsetAbsolute:10

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red_2.png
yOffsetAbsolute:10

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell_2.png
yOffsetAbsolute:10