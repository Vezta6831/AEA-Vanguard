[core]
copyFrom:ROOT:/DATA/total/baseAttack.template, ROOT:/DATA/total/debuffs.template, ROOT:/DATA/total/customUI.template
showInEditor: false
name: CocoonGreaterSpire
tags:building,Spire,SpireAI
class: CustomUnitMetadata
price:Minerals:150,Gas:100
maxHp: 1000
selfRegenRate:0.0166666666
generation_resources:energy=-0.25
generation_delay:10
mass: 9000
armour:1
energyMax: 75
energyRegen: 0
hideScorchMark: true
fogOfWarSightRange:8
displayText: Шпиль величия
displayDescription: -Позволяет порождать улучшенных летающих зергов
footprint: -1,-1,1,1
constructionFootprint:-1,-1,1,1
buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:0
radius: 40
techLevel: 1
buildSpeed: 1
selfBuildRate: 1
isBuilder: true
nanoRange: 0
isBuilding: true
isBio: true
numBitsOnDeath: 12
isUnrepairableUnit: true
effectOnDeath: CUSTOM:corpse

[action_clear]
isVisible:true
isActive:true
price:0
text_ru:Отмена
text:Cancel
iconImage:ROOT:/DATA/total/cancel.png
addResources:Minerals=75,Gas=112
ai_isDisabled:true
convertTo:Spire
buildSpeed: 0.3s
whenBuilding_playAnimation:buildEnd
spawnEffects:CUSTOM:buildEnd
canPlayerCancel:false
allowMultipleInQueue:false

[effect_corpse]
alwayStartDirAtZero:true
attachedToUnit: false
life: 120
alpha: 12
image:ROOT:/DATA/Zerg/death.png
priority: critical
drawUnderUnits:false
total_frames:12
animateFrameStart:0
animateFrameEnd:11
animateFrameSpeed:0.2
alsoPlaySound:ROOT:/DATA/Zerg/vomit.ogg
frame_width:  200
frame_height: 200

[hiddenAction_life_Time]
autoTrigger: if self.queueSize(lessThan=1) and self.energy(empty=true)
alsoQueueAction:life_Time_2

[hiddenAction_life_Time_2]
buildSpeed: 0.3s
convertTo: GreaterSpire
spawnEffects:CUSTOM:buildEnd
whenBuilding_playAnimation:buildEnd

[effect_buildEnd]
alwayStartDirAtZero:true
attachedToUnit: false
life: 30
alpha: 3
image:ROOT:/DATA/Zerg/buildEnd_2.png
priority: critical
drawUnderUnits:false
total_frames:3
animateFrameStart:0
animateFrameEnd:2
animateFrameSpeed:0.2

[graphics]
imageScale: 1
image:ROOT:/DATA/Zerg/cocoon_2.png
image_back:   NONE
image_wreak:ROOT:/DATA/Zerg/dead.png
image_turret: NONE
drawLayer:experimentals
showEnergyBar:false
image_shadow:ROOT:/DATA/Zerg/shadow_cocoon_2.png
image_shadow_frames:true
shadowOffsetX:0
shadowOffsetY:0
animation_idle_start: 0
animation_idle_end: 5
animation_idle_speed: 7
frame_width:  160
frame_height: 192

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[movement]
movementType: NONE

[ai]
buildPriority: 0.09
noneInBaseExtraPriority: 0.09
noneGlobalExtraPriority: 0.09
maxEachBase: 1
maxGlobal: 1
upgradedFrom: CocoonSpire

[animation_buildEnd]
body_0s: {frame:6}
body_0.1s: {frame:7}
body_0.2s: {frame:8}
body_0.3s: {frame:9}

[hiddenAction_debuff_ensnare]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_ensnare]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_lockdown]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_lockdown]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_stasis]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_stasis]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom]
@copyFrom_skipThisSection: true

[hiddenAction_debuff_maelstrom_effect]
@copyFrom_skipThisSection: true

[hiddenAction_removeDebuff_maelstrom]
@copyFrom_skipThisSection: true

[effect_ensnare_goo]
@copyFrom_skipThisSection: true

[effect_plague_goo]
image:ROOT:/DATA/total/plague_goo_3.png

[decal_grn_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_grn.png
yOffsetAbsolute:10

[decal_red_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByEnemyPlayer:true
image:ROOT:/DATA/total/circle_bldng_red.png
yOffsetAbsolute:10

[decal_yellow_circle]
@copyFromSection: template_customSelectCircle
onlyWhenSelectedByAllyNotOwnPlayer:true
image:ROOT:/DATA/total/circle_bldng_yell.png
yOffsetAbsolute:10

[decal_hp]
@copyFromSection: template_customBar
@define totalFrames:29
image:ROOT:/DATA/total/hp_30.png
frame_width:91
frame_height:5
frame:int((self.hp*100/self.maxHp)/(100/${totalFrames}))
yOffsetAbsolute:50