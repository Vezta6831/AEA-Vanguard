
[core]
#builtFrom_1_name:           EkInfantryFactoryUpgraded2
#builtFrom_1_pos:            1.85
#tags:                       infantry
#transportSlotsNeeded:       0.5
buildSpeed:                  0.0025
class:                       CustomUnitMetadata
displayDescription:          -Advanced armored infantry\n-Light plasma rifles\n-Short-range jetpack
displayRadius:               9
displayText:                 Pegasus
energyMax:                   25
energyNeedsToRechargeToFull: true
energyRegen:                 -0.025
isBio:                       true
isUnrepairableUnit:          true
mass:                        3000
maxHp:                       100
name:                        EkInfantryJetpackFlying
price:                       1100
radius:                      7
selfRegenRate:               0.10
showInEditor:                false
softCollisionOnAll:          9
techLevel:                   2


[action_trigger_Jetpack]
convertTo:   EkInfantryJetpackFlying
description: Allows flight over short gaps
displayType: action
isLocked:    true
pos:         1
text:        Jetpack


[action_ForceLand]
buildSpeed:              0.1s
convertTo:               jetpack
description:             Force landing
displayType:             action
isLocked:                if not self.isOverPassableTile(Type='OVER_CLIFF')
pos:                     2
text:                    Land
whenBuilding_cannotMove: true


[action_trigger_Land]
autoTrigger: if self.isEnergyEmpty() and self.isOverPassableTile(Type='OVER_CLIFF')
convertTo:   jetpack
isVisible:   false


[action_trigger_Crash]
addResources: hp=-250
autoTrigger:  if self.isEnergyEmpty() and not self.isOverPassableTile(Type='OVER_CLIFF')
isVisible:    false


[graphics]
#splastEffect:          true
animation_idle_end:     0
animation_idle_speed:   60
animation_idle_start:   0
animation_moving_end:   1
animation_moving_speed: 60
animation_moving_start: 1
image_shadow:           infantryshadow_small.png
image_wreak:            jetpack_corpse.png
image:                  jetpack_flying.png
movementEffect:         CUSTOM:EkRotorwash, CUSTOM:EkRotordust, CUSTOM:EkJetfire
movementEffectRate:     4
shadowOffsetX:          0.5
shadowOffsetY:          0.5
total_frames:           2


[attack]
aimOffsetSpread:          0.6
canAttack:                true
canAttackFlyingUnits:     true
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
maxAttackRange:           200
shootDelay:               14
turretSize:               10
turretTurnSpeed:          6


# Gun
[turret_1]
#invisible:            true
canShoot:              true
projectile:            1
recoilOffset:          0
shoot_light:           #33FFCC00
shoot_sound_vol:       0.3
shoot_sound:           plasma_fire
turnSpeed:             4.0
turnSpeedAcceleration: 1.0
x:                     0
y:                     0


[projectile_1]
color:        #DD22FF
directDamage: 11
drawSize:     0.7
frame:        11
life:         70
lightColor:   #DD22FF
lightSize:    0.5
speed:        12


[effect_EkRotorwash]
alpha:              0.2
atmospheric:        true
attachedToUnit:     false
createWhenOverLand: false
delayedStartTimer:  10
dirOffsetRandom:    180
dirSpeedRandom:     0.6
drawUnderUnits:     true
fadeInTime:         2
fadeOut:            true
hOffset:            -20
image:              rotorwash.png
life:               20
scaleFrom:          0.1
scaleTo:            1.0
spawnChance:        1
ySpeedRelative:     -0.5


[effect_EkRotordust]
alpha:                0.7
atmospheric:          true
attachedToUnit:       false
color:                #916C5B
createWhenOverLiquid: false
delayedStartTimer:    10
dirOffsetRandom:      180
dirSpeedRandom:       0.6
drawUnderUnits:       true
fadeInTime:           2
fadeOut:              true
hOffset:              -20
image:                rotorwash.png
life:                 20
scaleFrom:            0.1
scaleTo:              1.0
spawnChance:          1
ySpeedRelative:       -0.5


[effect_EkJetfire]
alpha:                1
atmospheric:          false
attachedToUnit:       false
dirOffsetRandom:      15
drawUnderUnits:       true
fadeInTime:           1
fadeOut:              true
image:                jetpack_flame.png
life:                 15
scaleFrom:            0.8
scaleTo:              2.2
xSpeedRelativeRandom: 0.2
yOffsetRelative:      -3
ySpeedRelative:       0.5
ySpeedRelativeRandom: 0.2


[movement]
maxTurnSpeed:          7.5
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.04
moveIgnoringBody:      true
movementType:          AIR
moveSlidingMode:       true
moveSpeed:             1.8
targetHeight:          20
targetHeightDrift:     0
turnAcceleration:      0.75


[ai]
upgradedFrom: jetpack

