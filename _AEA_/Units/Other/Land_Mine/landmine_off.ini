[core]
#availableInDemo:         true
#displayRadius:           9
buildSpeed:               0.0040
canNotBeDirectlyAttacked: true
class:                    CustomUnitMetadata
copyFrom:                 ROOT:effects.template
disableAllUnitCollisions: true
displayDescription:       - Small Activation Range (Small Ring) \n- Can be Disarmed by Enemy Engineers (Middle Ring) \n- Remote Detonation From Engineers (Large Ring) \n- Does 500 damage (AOE) \n- Cannot be attacked
displayText:              Landmine (auto off)
fogOfWarSightRange:       5
isBio:                    false
isBuilding:               false
mass:                     3000
maxHp:                    10
name:                     landmineOff
price:                    800
radius:                   9
showInEditor:             false
softCollisionOnAll:       0
tags:                     land_mines, lds, mineOff, IMNOTDEAD,
techLevel:                1
transportSlotsNeeded:     9999


[placementRule_mines_own]
@define rng:                70
#anyRuleInGroup:            place
blocksPlacement:            true
cannotPlaceMessage:         Cannot place Landmine within ${rng} range
checkEachTile:              true
excludeIncompleteBuildings: true
excludeNonBuildings:        false
maxCount:                   0
minCount:                   0
searchDistance:             ${rng}
searchTags:                 land_mines
searchTeam:                 any


[hiddenAction_clearWaypoint]
autoTriggerOnEvent:  newWaypointGivenByPlayer
clearActiveWaypoint: true


[hiddenAction_BuildOFf]
addResources:        ${core.price}
autoTriggerOnEvent:  created
deleteSelf:          true
requireConditional:  if numberOfUnitsInTeam(greaterThan=0, withTag='lds', withinRange= 70, incompleteBuildings=true)
showMessageToPlayer: Cannot place here!


[action_autoOn]
buildSpeed:    2s
convertTo:     landmineBuilt
description:   - Turns on auto detonation when units get in range\n- Takes 10 seconds
displayType:   action
isGuiBlinking: true
text:          Enable AutoDetonate


[hiddenAction_RemoteDetonate]
autoTriggerOnEvent:  newMessage(withTag="detonate_ownLM")
fireTurretXAtGround: 1


[action_detonate]
buildSpeed:                     0s
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround:            1
iconImage:                      warning.png
isActive:                       true
isVisible:                      true
text:                           Detonate


[hiddenAction_diffusedLandmind]
addResources:       hp=-${core.maxHp}
autoTriggerOnEvent: newMessage(withTag="diffuseLandmine")
deleteSelf:         true
spawnEffects:       CUSTOM:diffLM


[effect_diffLM]
alpha:                2
attachedToUnit:       false
color:                #ffffff
createWhenOverLiquid: false
dirOffsetRandom:      180
drawUnderUnits:       true
fadeInTime:           1
fadeOut:              true
image:                ROOT:data\images\YouMad.png
life:                 500
priority:             critical
scaleFrom:            0.35
scaleTo:              0.35
xOffsetRelative:      0
yOffsetRelative:      0


[hiddenAction_ShowLandMines]
autoTrigger:  if numberOfUnitsInEnemyTeam(greaterThan=0, withTag='Engineer', withinRange=800)
description:  - Shows the location of landmines when engineer is within range
spawnEffects: CUSTOM:mineFlare
text:         hiddenAction_ShowLandMines


[turret_RemoteRangeUI]
limitingRange:    800
showRangeUIGuide: true
turnSpeed:        0
x:                0
y:                0


[turret_DisarmRangeUI]
limitingRange:    360
showRangeUIGuide: true
turnSpeed:        0
x:                0
y:                0


[graphics]
animation_idle_end:   3
animation_idle_speed: 4
animation_idle_start: 3
icon_zoomed_out:      mine_off.png
image_shadow:         AUTO
image_turret:         NONE
image_wreak:          NONE
image:                simple_mine.png
isVisibleToEnemies:   false
shadowOffsetX:        1
shadowOffsetY:        1
total_frames:         4


[attack]
canAttack:                      false
canAttackFlyingUnits:           false
canAttackLandUnits:             false
canAttackNotTouchingWaterUnits: false
canAttackUnderwaterUnits:       false
dieOnAttack:                    true
isMelee:                        false
maxAttackRange:                 70
turretSize:                     20
turretTurnSpeed:                4


[turret_1]
canAttackFlyingUnits:           false
canAttackLandUnits:             false
canAttackNotTouchingWaterUnits: false
canAttackUnderwaterUnits:       false
delay:                          1
idleDir:                        0
invisible:                      true
limitingRange:                  70
projectile:                     1
showRangeUIGuide:               true
size:                           1.1
turnSpeed:                      15
x:                              0
y:                              0


[projectile_1]
#targetGround:  true
areaDamage:     500
areaRadius:     200
directDamage:   0
frame:          15
instant:        true
largeHitEffect: true
life:           0


[movement]
maxTurnSpeed:          0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
moveIgnoringBody:      false
movementType:          LAND
moveSlidingMode:       false
moveSpeed:             0
targetHeight:          -3
targetHeightDrift:     0
turnAcceleration:      0

