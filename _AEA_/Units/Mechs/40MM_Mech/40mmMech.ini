[core]
@memory REC:                 float
#availableInDemo:            true
#displayRadius:              11
buildSpeed:                  30.2s
class:                       CustomUnitMetadata
copyFrom:                    ROOT:effects.template, ROOT:statusEffect.template
displayDescription:          -Heavily armored\n-Ground attack\n-Moderate damage and range\has a long range attack ability but cannot move while using it.
displayText:                 40mmMech
energyMax:                   1
energyNeedsToRechargeToFull: true
energyRegen:                 0.0005
fogOfWarSightRange:          20
isBio:                       false
mass:                        6000
maxHp:                       2000
name:                        40mmMech
price:                       6000
radius:                      22
softCollisionOnAll:          0
techLevel:                   2
transportSlotsNeeded:        3
updateUnitMemoryRate:        1


[graphics]
image_shadow:                        SHADOW:40mmMech.png
image_turret:                        40mmRecoilCylinder.png
image_wreak:                         NONE
image:                               40mmMechNoB.png
imageScale:                          1.1
lock_body_rotation_with_main_turret: true
shadowOffsetX:                       2
shadowOffsetY:                       2
teamColorsOnTurret:                  true
total_frames:                        1


[action_burstfire]
addActionCooldownTime:                   25s
allowMultipleInQueue:                    false
buildSpeed:                              3s
canPlayerCancel:                         false
description:                             -fire a multi shrapnel round at a small area dealing heavy damage\n- {cannot move while shooting.}\n- {15 second cooldown.} \n- {maximum range 360} \n- {Damage 150 x 3}
displayType:                             action 
fireTurretXAtGround_count:               3
fireTurretXAtGround_withProjectile:      2
fireTurretXAtGround:                     5
text:                                    "Multi Impact Round"
whenBuilding_cannotMove:                 false
whenBuilding_rotateTo_aimAtActionTarget: true


[attack]
canAttack:                true
canAttackFlyingUnits:     false
canAttackLandUnits:       if self.queueSize(lessThan=1)
canAttackUnderwaterUnits: false
isFixedFiring:            false
maxAttackRange:           250
shootDelay:               28
turretRotateWithBody:     true
turretSize:               20
turretTurnSpeed:          3


# Body
[turret_1]
canShoot:              false
invisible:             true
recoilOffset:          -1.5
recoilOutTime:         1
recoilReturnTime:      35
turnSpeed:             4
turnSpeedAcceleration: 0.5
x:                     0
y:                     0


# 40mm Barrel
[turret_3]
attachedTo:            1
barrelX:               0
barrelY:               1
canAttackCondition:    if self.queueSize(lessThan=1)
canShoot:              true
image:                 40mmBarrel.png
invisible:             false
projectile:            1
recoilOffset:          -7
recoilOutTime:         1
recoilReturnTime:      35
shoot_flame:           CUSTOM:muzzleFlame
shoot_light:           #FFccCCEE
shoot_sound_vol:       0.3
shoot_sound:           cannon_firing
slave:                 true
turnSpeed:             0
turnSpeedAcceleration: 1.0
x:                     2.5
y:                     16


# Cylinder Recoil Cover
[turret_4]
attachedTo:            1
canShoot:              false
image:                 40mmRecoilCylinder.png
turnSpeed:             0
turnSpeedAcceleration: 0
x:                     2.5
y:                     0


# Ability Turret
[turret_5]
barrelY:         1
canShoot:        false
invisible:       true
limitingRange:   360
recoilOffset:    0
recoilOutTime:   0
shoot_flame:     CUSTOM:muzzleFlame
shoot_light:     #FFccCCEE
shoot_sound_vol: 0.2
shoot_sound:     ROOT:data\soundFx\weapon_Cannon+4.ogg
x:               2.5
y:               16


[projectile_1]
directDamage:    50
drawSize:        0.9
effectOnCreate:  CUSTOM:smoke*, CUSTOM:cartridge
frame:           2
largeHitEffect:  true
life:            70
speed:           10
trailEffect:     true
trailEffectRate: 2


# Ability Projectile
[projectile_2]
areaDamage:                 170
areaRadius:                 100
deflectionPower:            0.5
drawSize:                   0.9
explodeEffect:              CUSTOM:lightGround, smallExplosion
frame:                      2
gravity:                    4.5
initialUnguidedSpeedHeight: 5.2
largeHitEffect:             true
life:                       120
lightCastOnGround:          true
spawnUnit:                  explodeSFX
targetGround:               true
targetGroundSpread:         50
trailEffect:                true
trailEffectRate:            2

# Any Speed below 3 Will Not Register Damage for Some Reason
speed: 4


[effect_muzzleFlame]
alpha:                 1.6
animateFrameEnd:       4
animateFramePingPong:  true
animateFrameSpeed:     0.7
animateFrameStart:     0
attachedToUnit:        true
color:                 #FFFFFF
drawUnderUnits:        false
fadeOut:               true
hSpeed:                0.01
image:                 flame.png
life:                  12
liveAfterAttachedDies: false
physics:               false
priority:              high
scaleFrom:             0.8
scaleTo:               1.2
total_frames:          5


[effect_smoke]
alpha:                 1
atmospheric:           true
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirOffsetRandom:       180
dirSpeedRandom:        5
drawUnderUnits:        false
fadeInTime:            1
fadeOut:               true
frameIndex:            0
hSpeed:                0.15
hSpeedRandom:          0.05
life:                  90
liveAfterAttachedDies: false
priority:              low
scaleFrom:             0.2
scaleTo:               0.7
stripIndex:            smoke_black
xSpeedRelativeRandom:  0.1
ySpeedRelative:        0.1


[leg_1]
attach_x:    -8
attach_y:    0
heightSpeed: 0.8
holdDisMax:  36
holdDisMin:  21
image_foot:  foot_med.png
image_leg:   leg.png
moveSpeed:   2.1
resetAngle:  25
rotateSpeed: 7
x:           -15
y:           0


[leg_2]
attach_x: 8
attach_y: 0
copyFrom: 1
x:        15
y:        0


[movement]
maxTurnSpeed:           4
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
movementType:           OVER_CLIFF
moveSlidingMode:        false
moveSpeed:              0.7
reverseSpeedPercentage: 1
turnAcceleration:       0.5


[effect_cartridge]
alpha:                 2
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirSpeedRandom:        60
drawUnderUnits:        false
fadeInTime:            2
fadeOut:               true
hSpeed:                1.2 
image:                 cartridgeLongY.png
imageShadow:           cartridgeLongY.png
life:                  150 
liveAfterAttachedDies: false
physics:               true
priority:              low
scaleFrom:             0.4 
scaleTo:               0.4
xOffsetRelative:       20
xSpeedRelative:        1.5 
xSpeedRelativeRandom:  0.5 
yOffsetRelative:       -18
ySpeedRelativeRandom:  0.25


[effect_dirtyExplosion]
alsoEmitEffects:      CUSTOM:lightGround, CUSTOM:dirt, shockwave, CUSTOM:dirtySmoke, smallExplosion
createWhenOverLiquid: false
life:                 0

