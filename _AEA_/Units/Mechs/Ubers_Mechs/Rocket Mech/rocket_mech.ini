
[core]
#availableInDemo:            true
buildSpeed:                  24.4s
builtFrom_1_name:            mechFactoryT2
builtFrom_1_pos:             8.05
class:                       CustomUnitMetadata
copyFrom:                    ROOT:effects.template, ROOT:statusEffect.template
displayDescription:          -Medium armor\n-Heavily armed\n-Can attack ground and air\n-Strong vs. multiple units\n-Can overcharge itself to increase firepower and movement speed
displayText:                 Rocket Mech
energyMax:                   1
energyNeedsToRechargeToFull: true
energyRegen:                 0.0004
fogOfWarSightRange:          20
isBio:                       false
mass:                        6000
maxHp:                       1100
name:                        rocketMech
price:                       6500
radius:                      24
softCollisionOnAll:          0
techLevel:                   2
transportSlotsNeeded:        3


[hiddenAction_MICROGOD]
addWaypoint_target_fromReference: createMarker(x=self.x, y=self.y, dir=direction(self.x, self.y, attacking.x, attacking.y)).getOffsetRelative(y=-50)
addWaypoint_type:                 move
allowMultipleInQueue:             false
autoTrigger:                      if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=230)
clearAllWaypoints:                true


[action_powerUp]
addResources:    energy=0.99
ai_isDisabled:   true
autoTrigger:     if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=265) and self.energy(greaterThan=0.99)
buildSpeed:      0s
convertTo:       rocketMechPowered
description:     -Greatly increases grenade launcher damage and firing speed for 5 seconds\n-Increases movement speed\n-Temporarily disables anti-air capabilities
displayType:     action
iconImage:       ROOT:shared/overchargeIcon.png
playSoundAtUnit: ROOT:data\soundFx\Ubers\charge_up.ogg
price:           energy=1
spawnEffects:    CUSTOM:powerFlash, CUSTOM:powerFlash2, CUSTOM:powerAura4, CUSTOM:powerAura3, CUSTOM:powerAuraLight, CUSTOM:powerFlashLight, CUSTOM:sparks*10
text:            Overcharge


[graphics]
#animation_moving_end:                  7
#animation_moving_speed:                6
#animation_moving_start:                0
#lock_shadow_rotation_with_main_turret: true
image_shadow:                           SHADOW:rocket_mech_top.png
image_turret:                           rocket_mech_cannonbasefront.png
image_wreak:                            NONE
image:                                  rocket_mech_top.png
lock_body_rotation_with_main_turret:    true
shadowOffsetX:                          2
shadowOffsetY:                          2
teamColorsOnTurret:                     true
total_frames:                           1


[attack]
canAttack:                true
canAttackFlyingUnits:     true
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
isFixedFiring:            false
maxAttackRange:           265
shootDelay:               80
turretMultiTargeting:     true
turretRotateWithBody:     false
turretSize:               20
turretTurnSpeed:          3


[turret_1]
canShoot:              false
invisible:             true
recoilOffset:          -1
recoilOutTime:         1
recoilReturnTime:      15
turnSpeed:             3
turnSpeedAcceleration: 0.2
x:                     0
y:                     0


# Front Grenade Launcher
[turret_2]
attachedTo:               1
canAttackFlyingUnits:     false
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
canShoot:                 true
idleDir:                  0
image:                    cannonbarrel.png
invisible:                false
projectile:               1
recoilOffset:             -4
recoilOutTime:            1
recoilReturnTime:         15
shoot_flame:              CUSTOM:muzzleFlame
shoot_light:              #FFccCCEE
shoot_sound_vol:          0.4
shoot_sound:              large_gun_fire2
size:                     16
slave:                    true
turnSpeed:                0
turnSpeedAcceleration:    1.0
x:                        0
y:                        17


# Left Grenade Launcher
[turret_3]
attachedTo:               1
canAttackFlyingUnits:     false
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
canShoot:                 true
idleDir:                  -45
idleDirReversing:         -45
image:                    cannonbarrel_side.png
invisible:                false
linkDelayWithTurret:      2
projectile:               1
recoilOffset:             -4
recoilOutTime:            1
recoilReturnTime:         15
shoot_flame:              CUSTOM:muzzleFlame
shoot_light:              #FFccCCEE
shoot_sound_vol:          0.4
shoot_sound:              large_gun_fire2
size:                     14
slave:                    false
turnSpeed:                4
turnSpeedAcceleration:    1.0
warmup:                   15
x:                        -14
y:                        -8


# Right Grenade Launcher
[turret_4]
copyFrom:            3
idleDir:             45
idleDirReversing:    45
linkDelayWithTurret: 2
warmup:              30
x:                   14
y:                   -8


# Front Grenade Launcher Base
[turret_5]
attachedTo:            1
canShoot:              false
invisible:             false
turnSpeed:             0
turnSpeedAcceleration: 0
x:                     0
y:                     20


# Left Grenade Launcher Base
[turret_6]
attachedTo:            1
canShoot:              false
idleDir:               -45
idleDirReversing:      -45
image:                 rocket_mech_cannonbaseside.png
invisible:             false
size:                  14
turnSpeed:             4
turnSpeedAcceleration: 1.0
x:                     -14
y:                     -8


# Right Grenade Launcher Base
[turret_7]
copyFrom:         6
idleDir:          45
idleDirReversing: 45
x:                14
y:                -8


# Rocket Pod - Anti-Air
[turret_8]
attachedTo:               1
canAttackFlyingUnits:     true
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
delay:                    28
idleSpin:                 0.75
image:                    rocket_pod.png
limitingRange:            320
projectile:               2
recoilOffset:             -1
recoilOutTime:            2
recoilReturnTime:         20
shoot_flame:              CUSTOM:muzzleFlame, CUSTOM:backblast*2
shoot_light:              #FFEECCCC
shoot_sound_vol:          0.15
shoot_sound:              missile_fire
size:                     9
turnSpeed:                6
x:                        -0.5
y:                        -14


# Grenade
[projectile_1]
#lightColor:                #ff0000
#lightSize:                 0.1
#trailEffect:               CUSTOM:nadeTrail
#trailEffectRate:           1.5
areaDamage:                 70
areaRadius:                 75
drawSize:                   0
effectOnCreate:             CUSTOM:nade, CUSTOM:nadeFlash, CUSTOM:nadeFlashLight, CUSTOM:smoke*3
explodeEffect:              CUSTOM:explosionShockwave, CUSTOM:explosionLight, CUSTOM:explosionMain
gravity:                    0.16
image:                      ROOT:shared/shell.png
initialUnguidedSpeedHeight: 1.2
life:                       70
speed:                      6
targetGround:               true
targetGroundSpread:         14


# Anti-Air Rocket
[projectile_2]
areaDamage:                40
areaRadius:                75
autoTargetingOnDeadTarget: false
directDamage:              40
drawSize:                  0.9
explodeEffect:             CUSTOM:explosionShockwaveRocket, CUSTOM:explosionLight, CUSTOM:explosionMainRocket
frame:                     4
life:                      400
speed:                     1
targetSpeed:               8
trailEffect:               true


[leg_1]
#draw_foot_on_top: true
#dust_effect:      false
attach_x:          -4
attach_y:          10
hardLimit:         40
heightSpeed:       0.55
holdDisMax:        26
holdDisMin:        14
image_foot:        foot_small.png
image_leg:         leg.png
moveSpeed:         2
resetAngle:        25
rotateSpeed:       7
x:                 -18
y:                 17


[leg_2]
attach_x: 4
attach_y: 10
copyFrom: 1
x:        18
y:        17


[leg_3]
attach_x: -4
attach_y: -10
copyFrom: 1
x:        -18
y:        -17


[leg_4]
attach_x: 4
attach_y: -10
copyFrom: 1
x:        18
y:        -17


[movement]
maxTurnSpeed:           3
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
movementType:           OVER_CLIFF
moveSlidingMode:        false
moveSpeed:              0.65
reverseSpeedPercentage: 1
turnAcceleration:       0.2


[ai]
buildPriority:           0.5
maxGlobal:               6
noneInBaseExtraPriority: 0.5

