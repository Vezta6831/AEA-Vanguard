
[core]
#availableInDemo:            true
#displayRadius:              11
buildSpeed:                  28.7s
builtFrom_1_name:            mechFactoryT2
builtFrom_1_pos:             7.1
class:                       CustomUnitMetadata
copyFrom:                    ROOT:statusEffect.template
displayDescription:          -Heavily armored\n-Ground attack\n-Moderate damage and range\n-Can disable weapon to activate a temporary shield and self-repair
displayText:                 Heavy Mech
energyMax:                   1
energyNeedsToRechargeToFull: true
energyRegen:                 0.0005
fogOfWarSightRange:          16
isBio:                       false
mass:                        6000
maxHp:                       1800
name:                        heavyMech
price:                       5750
radius:                      22
softCollisionOnAll:          0
techLevel:                   2
transportSlotsNeeded:        3


[hiddenAction_MICROGOD]
addWaypoint_target_fromReference: createMarker(x=self.x, y=self.y, dir=direction(self.x, self.y, attacking.x, attacking.y)).getOffsetRelative(y=-50)
addWaypoint_type:                 move
allowMultipleInQueue:             false
autoTrigger:                      if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=230)
clearAllWaypoints:                true


[action_powerUp]
addResources:    energy=0.99
ai_isDisabled:   true
autoTrigger:     if self.hp(lessThan=600) and self.isControlledByAI() and self.energy(greaterThan=0.99)
buildSpeed:      0s
convertTo:       heavyMechShielded
description:     -Adds a 900HP shield for 8 seconds\n-Regenerates 400HP\n-Slightly increases movement speed\n-Unable to attack while shield is active
displayType:     action
iconImage:       shieldIcon.png
playSoundAtUnit: ROOT:data\soundFx\Ubers\shield_up2.ogg
price:           energy=1
spawnEffects:    CUSTOM:powerFlash, CUSTOM:powerFlashLight, CUSTOM:shield, CUSTOM:shieldTransition, CUSTOM:auraLight, CUSTOM:sparks*15
text:            Activate Shield


[graphics]
#animation_moving_end:                  7
#animation_moving_speed:                6
#animation_moving_start:                0
#lock_shadow_rotation_with_main_turret: true
image_shadow:                           SHADOW:heavy_mech_shadow.png
image_turret:                           heavy_mech_cannonbase.png
image_wreak:                            NONE
image:                                  heavy_mech_top.png
lock_body_rotation_with_main_turret:    true
shadowOffsetX:                          2
shadowOffsetY:                          2
teamColorsOnTurret:                     true
total_frames:                           1


[attack]
canAttack:                true
canAttackFlyingUnits:     false
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
isFixedFiring:            false
maxAttackRange:           250
shootDelay:               70
turretRotateWithBody:     true
turretSize:               20
turretTurnSpeed:          3


# Body
[turret_1]
canShoot:              false
invisible:             true
recoilOffset:          -1.5
recoilOutTime:         1
recoilReturnTime:      35
turnSpeed:             4
turnSpeedAcceleration: 0.5
x:                     0
y:                     0


# Cannon Bottom
[turret_2]
#invisible:            true
attachedTo:            1
canShoot:              false
image:                 heavy_mech_cannonbase2.png
turnSpeed:             0
turnSpeedAcceleration: 0
x:                     -0.5
y:                     0


# Cannon
[turret_3]
attachedTo:            1
canShoot:              true
image:                 cannonbarrel.png
invisible:             false
projectile:            1
recoilOffset:          -7
recoilOutTime:         1
recoilReturnTime:      35
shoot_flame:           CUSTOM:muzzleFlame
shoot_light:           #FFccCCEE
shoot_sound_vol:       0.3
shoot_sound:           cannon_firing
size:                  30
slave:                 true
turnSpeed:             0
turnSpeedAcceleration: 1.0
x:                     13
y:                     1


# Cannon Top
[turret_4]
#invisible:            true
attachedTo:            1
canShoot:              false
turnSpeed:             0
turnSpeedAcceleration: 0
x:                     -0.5
y:                     0


[projectile_1]
directDamage:    125
drawSize:        0.9
effectOnCreate:  CUSTOM:smoke*3
frame:           2
largeHitEffect:  true
life:            70
speed:           10
trailEffect:     true
trailEffectRate: 2


# Dummy Projectile
[projectile_2]
directDamage:   0
drawSize:       0
image:          NONE
largeHitEffect: true
life:           0
speed:          0
trailEffect:    true


[effect_powerFlashLight]
alpha:                 1.5
attachedToUnit:        true
color:                 #22ddff
dirSpeed:              5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               true
image:                 SHARED:light_50.png
life:                  45
liveAfterAttachedDies: false
priority:              verylow
scaleFrom:             0
scaleTo:               2.2


[effect_shieldTransition]
alpha:                 4
attachedToUnit:        true
color:                 #FFFFFF
dirSpeed:              1.5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               false
image:                 shield_mid.png
life:                  15
liveAfterAttachedDies: false
priority:              high
scaleFrom:             0
scaleTo:               0.8


[effect_shieldTransitionEnd]
alpha:                 0.5
attachedToUnit:        true
color:                 #FFFFFF
dirSpeed:              1.5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               true
image:                 shield_mid.png
life:                  20
liveAfterAttachedDies: false
priority:              high
scaleFrom:             0.8
scaleTo:               0


[effect_powerFlash]
alpha:                 0.8
attachedToUnit:        true
color:                 #22ddff
delayedStartTimer:     15
dirSpeed:              5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               true
hSpeed:                0.1
image:                 shield_mid.png
life:                  35
liveAfterAttachedDies: true
priority:              low
scaleFrom:             0.8
scaleTo:               1.2


[effect_powerFlashEnd]
alpha:                 0.8
attachedToUnit:        true
color:                 #22ddff
delayedStartTimer:     0
dirSpeed:              5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               true
hSpeed:                0.1
image:                 shield_mid.png
life:                  50
liveAfterAttachedDies: true
priority:              low
scaleFrom:             0.8
scaleTo:               1.5


[effect_powerFlashEndLight]
alpha:                 1
attachedToUnit:        true
color:                 #22ddff
dirSpeed:              5
drawUnderUnits:        true
fadeInTime:            2
fadeOut:               true
image:                 SHARED:light_50.png
life:                  40
liveAfterAttachedDies: false
priority:              verylow
scaleFrom:             1.3
scaleTo:               2.2


[effect_sparks]
alpha:                 1
atmospheric:           false
attachedToUnit:        true
color:                 #EEEEFF
dirOffsetRandom:       5
dirSpeedRandom:        5
fadeInTime:            5
fadeOut:               true
image:                 shield_spark.png
life:                  80
priority:              verylow
scaleFrom:             0.3
scaleTo:               0.1
xOffsetRelativeRandom: 14
xSpeedRelativeRandom:  0.8
yOffsetRelativeRandom: 12
ySpeedRelativeRandom:  0.8


[effect_shield]
alpha:                 1
attachedToUnit:        true
color:                 #FFFFFF
delayedStartTimer:     15
dirSpeed:              1.5
drawUnderUnits:        false
fadeInTime:            0
fadeOut:               true
image:                 shield_mid.png
life:                  30
liveAfterAttachedDies: false
priority:              high
scaleFrom:             0.8
scaleTo:               0.8


[effect_auraLight]
alpha:                 2
attachedToUnit:        true
color:                 #22ddff
dirSpeed:              0
drawUnderUnits:        true
fadeInTime:            0
fadeOut:               true
image:                 SHARED:light_50.png
life:                  250
liveAfterAttachedDies: false
priority:              low
scaleFrom:             0.7
scaleTo:               1.5


[effect_muzzleFlame]
alpha:                 1.6
animateFrameEnd:       4
animateFramePingPong:  true
animateFrameSpeed:     0.7
animateFrameStart:     0
attachedToUnit:        true
color:                 #FFFFFF
drawUnderUnits:        false
fadeOut:               true
hSpeed:                0.01
image:                 flame.png
life:                  12
liveAfterAttachedDies: false
physics:               false
priority:              high
scaleFrom:             0.8
scaleTo:               1.2
total_frames:          5


[effect_smoke]
alpha:                 1
atmospheric:           true
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirOffsetRandom:       180
dirSpeedRandom:        5
drawUnderUnits:        false
fadeInTime:            1
fadeOut:               true
frameIndex:            0
hSpeed:                0.15
hSpeedRandom:          0.05
life:                  90
liveAfterAttachedDies: false
priority:              low
scaleFrom:             0.2
scaleTo:               0.7
stripIndex:            smoke_black
xSpeedRelativeRandom:  0.1
ySpeedRelative:        0.1


[leg_1]
#draw_foot_on_top: true
#dust_effect:      false
attach_x:          -8
attach_y:          0
heightSpeed:       0.8
holdDisMax:        36
holdDisMin:        21
image_foot:        foot_med.png
image_leg:         leg.png
moveSpeed:         2.1
resetAngle:        25
rotateSpeed:       7
x:                 -15
y:                 0


[leg_2]
attach_x: 8
attach_y: 0
copyFrom: 1
x:        15
y:        0


[movement]
maxTurnSpeed:           4
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
movementType:           OVER_CLIFF
moveSlidingMode:        false
moveSpeed:              0.7
reverseSpeedPercentage: 1
turnAcceleration:       0.5


[ai]
buildPriority:           0.7
maxGlobal:               11
noneInBaseExtraPriority: 0.5

