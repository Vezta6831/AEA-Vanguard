
[core]
#availableInDemo:            true
#buildingToFootprintOffsetX: 20
#buildingToFootprintOffsetY: 20
buildSpeed:                  43.8s
class:                       CustomUnitMetadata
constructionFootprint:       -1, -1, 1, 1
copyFrom:                    ROOT:effects.template,
displayDescription:          -Detects Cloaked Units\n-Heavily armored\n-Ground attack when undeployed\n-Deploys for extra range, anti-air and shield regen\n-Cannot attack while undeploying\n-Can release a repairing nano-burst when deployed
displayText:                 Heavy Mobile Turret
fogOfWarSightRange:          20
footprint:                   -1, -1, 1, 1
isBio:                       false
isBuilding:                  true
mass:                        15000
maxHp:                       3000
maxShield:                   800
name:                        heavyMobileTurretDeployed
price:                       7500
radius:                      28
shieldRegen:                 0.275
showInEditor:                false
softCollisionOnAll:          0
startShieldAtZero:           true
tags:                        detector, mech, unit
techLevel:                   2
transportSlotsNeeded:        3


[hiddenAction_aiunDeploy]
alsoQueueAction: undeploy
autoTrigger:     if self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(lessThan=1, withinRange=310)


[hiddenAction_aiSquadHealing]
alsoQueueAction:    areaHeal, areaHealMid
autoTrigger:        if self.hp(lessThan=1000) and self.isControlledByAI()
requireConditional: if self.customTimer(laterThanSeconds=60)


[action_undeploy]
#canPlayerCancel: false
ai_isDisabled:    true
buildSpeed:       2.4s
convertTo:        heavyMobileTurret
displayType:      action
isVisible:        true
text:             Undeploy


[action_deploy]
isVisible: false


[action_areaHeal]
#addResources:                  setFlag=1
#alsoQueueAction:               reenableTurrets
allowMultipleInQueue:           false
buildSpeed:                     1s
canPlayerCancel:                false
description:                    -Releases 3 healing bursts that repair units for 200HP each\n-Healing depends on distance from the unit\n-Cannot repair shields
displayType:                    action
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround:            heal
iconImage:                      ROOT:shared/nanoBurstIcon.png
isLocked:                       if not self.customTimer(laterThanSeconds=60)
isLockedMessage:                Cooldown
resetCustomTimer:               true
spawnEffects:                   CUSTOM:powerAura, CUSTOM:powerAura2
text:                           Nano Burst


[action_areaHealMid]
addResources:                   setFlag=2
autoTrigger:                    if self.customTimer(laterThanSeconds=1.5) and not self.hasFlag(id=2) and self.hasFlag(id=1) or self.customTimer(laterThanSeconds=3) and self.customTimer(withinSeconds=3.1) and self.hasFlag(id=2)
buildSpeed:                     0s
canPlayerCancel:                false
description:                    -
displayType:                    action
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround:            heal
isVisible:                      false
price:                          hp=300
text:                           Nano Burst (Second burst)


[graphics]
#animation_moving_end:   7
#animation_moving_speed: 6
#animation_moving_start: 0
#imageScale:             1.1
image_shadow:            AUTO
image_wreak:             NONE
image:                   body.png
shadowOffsetX:           3
shadowOffsetY:           3
teamColorsOnTurret:      true
total_frames:            1


[action_reenableTurrets]
addResources:     unsetFlag=1, unsetFlag=2
buildSpeed:       9s
canPlayerCancel:  false
description:      -Disables flag to let unit fire and undeploy
displayType:      action
isVisible:        false
price:            0
resetCustomTimer: true
text:             Reenable Turrets


[attack]
canAttack:                true
canAttackFlyingUnits:     true
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
maxAttackRange:           310
shootDelay:               220
turretMultiTargeting:     true
turretRotateWithBody:     true
turretSize:               19
turretTurnSpeed:          3


# Cannon Front
[turret_2]
attachedTo:            1
canAttackFlyingUnits:  false
canAttackLandUnits:    true
canShoot:              true
delay:                 1.2s
image:                 head_barrel.png
invisible:             false
projectile:            1
recoilOffset:          -6
recoilOutTime:         8
recoilReturnTime:      40
shoot_flame:           large
shoot_light:           #FFEECCCC
shoot_sound_vol:       0.2
shoot_sound:           large_gun_fire1
size:                  26
slave:                 true
turnSpeed:             4
turnSpeedAcceleration: 1.0
x:                     -5
y:                     10


[turret_2B]
copyFrom:            2
invisible:           false
linkDelayWithTurret: 2
warmup:              0.5s
x:                   5
y:                   10


[turret_1]
canAttackFlyingUnits:  false
canAttackLandUnits:    true
canShoot:              false
idleDir:               0
image:                 head_turret.png
recoilOffset:          -1.5
recoilOutTime:         4
recoilReturnTime:      6
turnSpeed:             1.5
turnSpeedAcceleration: 0.05
x:                     0
y:                     0


[turret_anti_air]
attachedTo:            1
canAttackFlyingUnits:  true
canAttackLandUnits:    false
canShoot:              true
delay:                 0.5s
idleDir:               45
image:                 anti_air.png
projectile:            aa
recoilOffset:          -4
recoilOutTime:         6
recoilReturnTime:      10
shoot_flame:           CUSTOM:missileShockwave, CUSTOM:smoke*3
shoot_light:           #FFffebbc
shoot_sound_vol:       0.3
shoot_sound:           missile_fire
size:                  8
slave:                 false
turnSpeedAcceleration: 1.0
x:                     3
y:                     -10


[projectile_cann]
areaDamage:         120
areaRadius:         60
drawSize:           1
explodeOnEndOfLife: true
image:              O_Bv3.png
life:               280
lightColor:         #FFDA55
lightSize:          0.5
speed:              12


[projectile_1]
areaDamage:      30
areaRadius:      75
directDamage:    95
drawSize:        0.9
effectOnCreate:  CUSTOM:smoke*3
frame:           2
largeHitEffect:  true
life:            70
speed:           10
trailEffect:     true
trailEffectRate: 2


# Dummy Projectile
[projectile_2]
directDamage:   0
drawSize:       0
image:          NONE
largeHitEffect: true
life:           0
speed:          0
trailEffect:    true


# Missle
[projectile_aa]
areaDamage:     30
areaRadius:     75
directDamage:   35
drawSize:       0.9
frame:          4
largeHitEffect: true
life:           160
lightColor:     #f7ff1d
lightSize:      0.5
speed:          1
targetSpeed:    8
trailEffect:    true


# Area Heal Turret
[turret_heal]
#chargeEffectImage:       SHARED:lighting_charge2.png
#shoot_flame:             CUSTOM:sparks2*3, CUSTOM:lightSlowFade
#turnSpeedAcceleration:   1.5
canAttackFlyingUnits:     false
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
canShoot:                 true
delay:                    0
invisible:                true
limitingRange:            220
projectile:               heal
shoot_flame:              NONE
shoot_sound_vol:          0.5
shoot_sound:              NONE
size:                     0
turnSpeed:                5.0
warmup:                   0
x:                        0
y:                        0


# Healing Burst
[projectile_heal]
areaDamage:                  -200
areaExpandTime:              90
areaHitAirAndLandAtSameTime: true
areaRadius:                  220
buildingDamageMultiplier:    0.1
deflectionPower:             -1
explodeEffect:               CUSTOM:areaHeal, CUSTOM:healLights, CUSTOM:healSparks*14, CUSTOM:healBodyLight
explodeOnEndOfLife:          true
friendlyFire:                only-ignoreEnemy
instant:                     false
largeHitEffect:              true
life:                        0
shieldDamageMultiplier:      0
speed:                       0
targetGround:                true


[comment_turret_anti_air]
x: 3
y: -10


[comment_projectile_cann]
areaDamage: 200
areaRadius: 60


[leg_1]
attach_x:                     -8
attach_y:                     16
estimatingPositionMultiplier: 0.85
hardLimit:                    50
heightSpeed:                  1
holdDisMax:                   12
holdDisMin_maxMovingLegs:     1
holdDisMin:                   8
image_foot:                   foot_small.png
image_leg:                    leg.png
moveSpeed:                    2.1
resetAngle:                   25
rotateSpeed:                  7
x:                            -8
y:                            16


[leg_2]
attach_x: 8
attach_y: 16
copyFrom: 1
x:        8
y:        16


[leg_3]
attach_x: -8
attach_y: 0
copyFrom: 1
x:        -8
y:        0


[leg_4]
attach_x: 8
attach_y: 0
copyFrom: 1
x:        8
y:        0


[leg_5]
attach_x: -8
attach_y: -16
copyFrom: 1
x:        -8
y:        -16


[leg_6]
attach_x: 8
attach_y: -16
copyFrom: 1
x:        16
y:        -8


[movement]
maxTurnSpeed:           0
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
movementType:           NONE
moveSlidingMode:        false
moveSpeed:              0
reverseSpeedPercentage: 1
targetHeight:           0
turnAcceleration:       0.5


[ai]
buildPriority: 0.1
maxEachBase:   1
upgradedFrom:  heavyMobileTurret

