
[core]
#displayRadius:              11
buildSpeed:                  0.0006
builtFrom_1_name:            mechFactoryT2
builtFrom_1_pos:             8.2
class:                       CustomUnitMetadata
copyFrom:                    mech_large_common.ini
displayDescription:          -Land & Air Lightning attack\n- Lightning can chain to another unit\n- Decent Range and movement speed\n-Very strong vs. shields\n-Reduced damage vs. grounded buildings\n-Can discharge itself and sacrifice HP to deal area damage
displayText:                 Tesla Mech
energyMax:                   1
energyNeedsToRechargeToFull: true
energyRegen:                 0.0001
fogOfWarSightRange:          15
isBio:                       false
mass:                        15000
maxHp:                       2000
name:                        teslaMech
overrideAndReplace:          mechLightning
price:                       6500
radius:                      25
softCollisionOnAll:          0
techLevel:                   2
transportSlotsNeeded:        3


[hiddenAction_MICROGOD]
addWaypoint_target_fromReference: createMarker(x=self.x, y=self.y, dir=direction(self.x, self.y, attacking.x, attacking.y)).getOffsetRelative(y=-50)
addWaypoint_type:                 move
allowMultipleInQueue:             false
autoTrigger:                      if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=230)
clearAllWaypoints:                true


[action_areaShock]
buildSpeed:                     0s
canPlayerCancel:                false
description:                    -Releases a surge of electricity around the unit\n-Damages all nearby land units\n-Very effective vs. shields\n-Deals 250 damage to the unit\n-Cannot be activated when under 800HP
displayType:                    action
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround:            shock
iconImage:                      areaShockIcon.png
isActive:                       if not self.hp(lessThan=800)
price:                          energy=1, hp=100
spawnEffects:                   CUSTOM:selfShockSmoke*5, CUSTOM:SelfShockSpark1*4, CUSTOM:SelfShockSpark2*3, CUSTOM:SelfShockSpark3*2, CUSTOM:chargeSparks*15, CUSTOM:areaShock, CUSTOM:areaShockRays, CUSTOM:areaShock2, CUSTOM:areaShockRays2, CUSTOM:areaShockLight, CUSTOM:areaShockLight2
text:                           Area Discharge


[graphics]
#lock_shadow_rotation_with_main_turret: true
animation_idle_end:                     0
animation_idle_speed:                   0
animation_idle_start:                   0
animation_moving_end:                   0
animation_moving_speed:                 0
animation_moving_start:                 0
image_shadow:                           SHADOW:topLightningShadow.png
image_turret:                           coil_rails.png
image_wreak:                            NONE
image:                                  topLightning.png
lock_body_rotation_with_main_turret:    true
shadowOffsetX:                          3
shadowOffsetY:                          3
total_frames:                           13


[attack]
canAttack:                true
canAttackFlyingUnits:     true
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
maxAttackRange:           250
shootDelay:               100
turretRotateWithBody:     false
turretSize:               20
turretTurnSpeed:          2


[turret_1]
canShoot:              false
idleDir:               0
invisible:             true
recoilOffset:          -1
recoilOutTime:         3
recoilReturnTime:      23
turnSpeed:             3.9
turnSpeedAcceleration: 0.12
turnSpeedDeceleration: 0.3
x:                     0
y:                     0


[turret_2]
attachedTo:         1
canShoot:           true
chargeEffectImage:  SHARED:lighting_charge2.png
projectile:         1
recoilOffset:       -4
recoilOutTime:      3
recoilReturnTime:   23
shoot_flame:        CUSTOM:sparks2*3, CUSTOM:lightSlowFade
shoot_sound_vol:    0.3
shoot_sound:        lighting_burst
size:               0
slave:              true
turnSpeed:          5.0
warmup:             35
warmupCallDownRate: 0.3
x:                  15.15
y:                  13


[turret_3]
copyFrom:            2
linkDelayWithTurret: 2
warmup:              35
x:                   -15.2
y:                   13


[turret_4]
attachedTo:            1
canShoot:              false
idleDir:               0
image:                 main_coils.png
slave:                 true
turnSpeed:             0
turnSpeedAcceleration: 0.12
turnSpeedDeceleration: 0.3
x:                     0
y:                     5


# Area Shock Turret
[turret_shock]
#shoot_flame:             CUSTOM:sparks2*3, CUSTOM:lightSlowFade
#turnSpeedAcceleration:   1.5
canAttackFlyingUnits:     false
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
canShoot:                 true
chargeEffectImage:        SHARED:lighting_charge2.png
invisible:                true
limitingRange:            160
onShoot_playAnimation:    selfShock
projectile:               2
shoot_flame:              NONE
shoot_sound_vol:          0.5
shoot_sound:              ROOT:data\soundFx\shock.ogg
size:                     0
turnSpeed:                5.0
warmup:                   0
x:                        0
y:                        0


[animation_selfShock]
body_0.05s: {frame: 1 }
body_0.15s: {frame: 3 }
body_0.1s:  {frame: 2 }
body_0.25s: {frame: 5 }
body_0.2s:  {frame: 4 }
body_0.35s: {frame: 7 }
body_0.3s:  {frame: 6 }
body_0.45s: {frame: 9 }
body_0.4s:  {frame: 8 }
body_0.55s: {frame: 11}
body_0.5s:  {frame: 10}
body_0.65s: {frame: 13}
body_0.6s:  {frame: 12}
body_0s:    {frame: 0 }


[leg_1]
#draw_foot_on_top: true
#dust_effect:      false
attach_x:          0
attach_y:          0
endDirOffset:      45
hardLimit:         40
heightSpeed:       0.5
holdDisMax:        30
holdDisMin:        20
image_foot:        foot_small.png
image_leg:         leg.png
moveSpeed:         2.4
moveWarmUp:        0.05s
resetAngle:        25
rotateSpeed:       7
x:                 -20
y:                 22


[leg_2]
attach_x:     0
attach_y:     0
copyFrom:     1
endDirOffset: -45
x:            20
y:            22


[leg_3]
attach_x:     0
attach_y:     0
copyFrom:     1
endDirOffset: -45
x:            -20
y:            -22


[leg_4]
attach_x:     0
attach_y:     0
copyFrom:     1
endDirOffset: 45
x:            20
y:            -22


# Lightning
[projectile_1]
buildingDamageMultiplier:  0.3
directDamage:              140
explodeEffect:             CUSTOM:lightningShock*1, CUSTOM:sparks*6, CUSTOM:hitLightFlash2
explodeEffectOnShield:     CUSTOM:lightningShock*1, CUSTOM:hitLightFlash
instant:                   true
largeHitEffect:            true
life:                      25
lightingEffect:            true
shieldDamageMultiplier:    2
shieldDefectionMultiplier: 0.1
spawnUnit:                 teslaMech_chainLightning


# Area Shock
[projectile_2]
#buildingDamageMultiplier: 0.5
areaDamage:                520
areaExpandTime:            20
areaRadius:                170
deflectionPower:           -1
explodeEffect:             NONE
explodeEffectOnShield:     NONE
explodeOnEndOfLife:        true
instant:                   false
largeHitEffect:            false
life:                      0
shieldDamageMultiplier:    2
shieldDefectionMultiplier: 0.1
speed:                     0
targetGround:              true


[effect_hitLightFlash]
alpha:          0.6
attachedToUnit: false
color:          #63e6e8
drawUnderUnits: false
fadeOut:        true
image:          SHARED:light_50.png
life:           17
priority:       high
scaleFrom:      1.8
scaleTo:        1.8


[effect_hitLightFlash2]
alpha:          0.6
attachedToUnit: false
color:          #63e6e8
drawUnderUnits: false
fadeOut:        true
image:          SHARED:light_50.png
life:           17
priority:       high
scaleFrom:      0.3
scaleTo:        1.5


[effect_lightningShock]
alpha:                      0.6
animateFrameEnd:            13
animateFramePingPong:       false
animateFrameSpeed:          0.5
animateFrameSpeedRandom:    0.2
animateFrameStart:          0
animateFrameStartRandomAdd: 2
attachedToUnit:             false
dirOffset:                  0
dirOffsetRandom:            180
fadeInTime:                 0
fadeOut:                    false
hOffset:                    0
image:                      SHARED:lightning_shock.png
life:                       60
total_frames:               14
xOffsetRelative:            0
yOffsetRelative:            0


[effect_sparks]
attachedToUnit:       false
hSpeed:               2
image:                SHARED:spark.png
life:                 150
physics:              true
priority:             verylow
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6


[effect_sparks2]
attachedToUnit:       false
hSpeed:               1
image:                SHARED:spark.png
life:                 150
physics:              true
priority:             verylow
xSpeedRelativeRandom: 0.5
ySpeedRelative:       2
ySpeedRelativeRandom: 0.5


[effect_chargeSparks]
atmospheric:          true
attachedToUnit:       false
drawUnderUnits:       true
hSpeed:               0
image:                SHARED:spark.png
life:                 30
physics:              false
physicsGravity:       -0.5
priority:             verylow
scaleFrom:            4
scaleTo:              2
xSpeedRelativeRandom: 6
ySpeedRelativeRandom: 6


[effect_selfShockSpark1]
attachedToUnit:       true
fadeInTime:           5
hSpeed:               2
image:                SHARED:spark.png
life:                 60
physics:              true
priority:             verylow
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6


[effect_selfShockSpark2]
attachedToUnit:       true
delayedStartTimer:    20
fadeInTime:           5
hSpeed:               2
image:                SHARED:spark.png
life:                 60
physics:              true
priority:             verylow
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6


[effect_selfShockSpark3]
attachedToUnit:       true
delayedStartTimer:    100
fadeInTime:           5
hSpeed:               2
image:                SHARED:spark.png
life:                 60
physics:              true
priority:             verylow
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6


[effect_selfShockSmoke]
alpha:                 3
atmospheric:           true
attachedToUnit:        true
color:                 #FFFFFF
createWhenZoomedOut:   false
dirOffsetRandom:       180
dirSpeedRandom:        1
drawUnderUnits:        false
fadeInTime:            0.5
fadeOut:               true
frameIndex:            0
hSpeed:                0.15
hSpeedRandom:          0.05
life:                  130
liveAfterAttachedDies: false
priority:              low
scaleFrom:             0.3
scaleTo:               1.2
stripIndex:            smoke_black
xOffsetRelativeRandom: 3
xSpeedRelativeRandom:  0.1
yOffsetRelativeRandom: 3
ySpeedRelative:        0.1


[effect_areaShock]
alpha:           1.2
attachedToUnit:  false
dirOffsetRandom: 180
dirSpeed:        10
drawUnderUnits:  true
fadeInTime:      1
fadeOut:         true
hOffset:         0
image:           areaShock.png
life:            30
priority:        veryhigh
scaleFrom:       0.5
scaleTo:         9
xOffsetRelative: 0
yOffsetRelative: 0


[effect_areaShock2]
alpha:             1
attachedToUnit:    false
delayedStartTimer: 2
dirOffsetRandom:   180
dirSpeed:          -6
drawUnderUnits:    true
fadeInTime:        1
fadeOut:           true
hOffset:           0
image:             areaShock.png
life:              30
priority:          low
scaleFrom:         0.5
scaleTo:           9
xOffsetRelative:   0
yOffsetRelative:   0


[effect_areaShockRays]
alpha:                0.8
animateFrameEnd:      13
animateFramePingPong: false
animateFrameSpeed:    0.4
animateFrameStart:    0
attachedToUnit:       false
dirOffset:            0
dirOffsetRandom:      60
drawUnderUnits:       true
fadeInTime:           1
fadeOut:              true
image:                SHARED:lightning_shock.png
life:                 30
priority:             high
scaleFrom:            1
scaleTo:              9
total_frames:         14
xOffsetRelative:      0
yOffsetRelative:      0


[effect_areaShockRays2]
alpha:                0.65
animateFrameEnd:      13
animateFramePingPong: false
animateFrameSpeed:    0.4
animateFrameStart:    0
attachedToUnit:       false
dirOffset:            180
dirOffsetRandom:      60
drawUnderUnits:       true
fadeInTime:           1
fadeOut:              true
image:                SHARED:lightning_shock.png
life:                 30
priority:             low
scaleFrom:            1
scaleTo:              9
total_frames:         14
xOffsetRelative:      0
yOffsetRelative:      0


[effect_areaShockLight]
alpha:          1.3
attachedToUnit: true
color:          #a4e9ff
drawUnderUnits: true
fadeInTime:     1
fadeOut:        true
image:          SHARED:light_50.png
life:           30
priority:       low
scaleFrom:      0
scaleTo:        8


[effect_areaShockLight2]
alpha:          0.6
attachedToUnit: true
color:          #a4e9ff
drawUnderUnits: false
fadeInTime:     1
fadeOut:        true
image:          SHARED:light_50.png
life:           30
priority:       low
scaleFrom:      0
scaleTo:        8


[effect_lightSlowFade]
alpha:          1.7
attachedToUnit: true
color:          #63e6e8
fadeOut:        true
image:          SHARED:light_50.png
life:           40
scaleFrom:      0.3
scaleTo:        0.2


[movement]
maxTurnSpeed:           3
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
moveSlidingMode:        false
moveSpeed:              0.60
reverseSpeedPercentage: 1
turnAcceleration:       0.5


[ai]
buildPriority:           0.1
maxGlobal:               3
noneInBaseExtraPriority: 0.2

