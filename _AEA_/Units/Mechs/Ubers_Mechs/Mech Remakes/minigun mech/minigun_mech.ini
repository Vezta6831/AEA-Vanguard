
[core]
#availableInDemo:            true
#displayRadius:              11
buildSpeed:                  24.3s
class:                       CustomUnitMetadata
copyFrom:                    mech_med_common.ini,ROOT:effects/rocketmech.template,ROOT:effects.template
displayDescription:          -Ground attack\n-Fast firing\n-Speeds up as it fires\n-Has shield (weak vs. lightning)\n- Can enter overcharge mode to speed up firerate.
displayText:                 Minigun Mech
energyMax:                   1
energyNeedsToRechargeToFull: true
energyRegen:                 0.0002
fogOfWarSightRange:          16
isBio:                       false
mass:                        15000
maxHp:                       800
maxShield:                   1500
name:                        minigunMech
overrideAndReplace:          mechMinigun
price:                       5000
radius:                      23
shieldRegen:                 0.35
showInEditor:                true
softCollisionOnAll:          0
techLevel:                   2
transportSlotsNeeded:        3


[comment_hiddenAction_MICROGOD]
addWaypoint_target_fromReference: createMarker(x=self.x, y=self.y, dir=direction(self.x, self.y, attacking.x, attacking.y)).getOffsetRelative(y=+50)
addWaypoint_type:                 move
allowMultipleInQueue:             false
autoTrigger:                      if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=210)
clearAllWaypoints:                true


[action_overcharge]
buildSpeed:      0s
convertTo:       minigunOC
description:     Diverts shields to overcharge minigun\n- Decreases range to 210\n- Lasts about 5 seconds\n- Moves faster 
displayType:     action
iconImage:       ROOT:shared/overchargeIcon.png
isLocked:        if not self.customTimer(laterThanSeconds=60) or self.shield(lessThan=1000)
isVisible:       true
playSoundAtUnit: ROOT:data\soundFx\Ubers\charge_up.ogg
spawnEffects:    CUSTOM:powerFlash, CUSTOM:powerFlash2, CUSTOM:powerAura4, CUSTOM:powerAura3, CUSTOM:powerAuraLight, CUSTOM:powerFlashLight, CUSTOM:sparks*10
text:            Overcharge


[comment_action_powerUp]
addResources:    energy=0.99
ai_isDisabled:   true
autoTrigger:     if self.isAttacking() and self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=130) and self.shield(lessThan=10)
buildSpeed:      0s
convertTo:       minigunMechPowered
description:     - Overcharges the main gun for 5 seconds\n- Greatly increases firing rate\n- Completely drains shields\n- Slows down movement speed\n- Much shorter range\n- (All effects last for 5 seconds)
displayType:     action
iconImage:       ROOT:shared/overchargeIcon.png
playSoundAtUnit: ROOT:data\soundFx\Ubers\charge_up.ogg
price:           energy=1
spawnEffects:    CUSTOM:powerFlash, CUSTOM:powerFlash2, CUSTOM:powerAura4, CUSTOM:powerAura3, CUSTOM:powerAuraLight, CUSTOM:powerFlashLight, CUSTOM:sparks*10
text:            Overcharge


[graphics]
#animation_moving_end:                  7
#animation_moving_speed:                6
#animation_moving_start:                0
#lock_shadow_rotation_with_main_turret: true
animation_attack_end:                   4
animation_attack_speed:                 3
animation_attack_start:                 1
animation_idle_end:                     0
animation_idle_speed:                   1
animation_idle_start:                   0
image_shadow:                           AUTO
image_turret:                           NONE
image_wreak:                            NONE
image:                                  topMinigun.png
lock_body_rotation_with_main_turret:    true
shadowOffsetX:                          2
shadowOffsetY:                          2
total_frames:                           5


[attack]
canAttack:                true
canAttackFlyingUnits:     false
canAttackLandUnits:       true
canAttackUnderwaterUnits: false
maxAttackRange:           210
shootDelay:               31
turretRotateWithBody:     false
turretSize:               20
turretTurnSpeed:          3


[turret_1]
canShoot:              false
idleDir:               0
recoilOffset:          -1
recoilOutTime:         2
recoilReturnTime:      7
turnSpeed:             2.9
turnSpeedAcceleration: 0.3
x:                     0
y:                     0


[turret_2]
attachedTo:               1
canShoot:                 true
invisible:                true
projectile:               bullet
recoilOffset:             -1
recoilOutTime:            2
recoilReturnTime:         7
shoot_flame:              CUSTOM:muzzleFlame, CUSTOM:whoosh 
shoot_light:              #CCFFFFaa
shoot_sound_vol:          0.20
shoot_sound:              gun_fire
size:                     1
slave:                    true
turnSpeed:                4.0
turnSpeedAcceleration:    1.0
warmup:                   130
warmupCallDownRate:       0.425
warmupNoReset:            true
warmupShootDelayTransfer: 19
x:                        8
y:                        26


[turret_3GUIDANCETURRET]
canShoot:         false
invisible:        true
limitingRange:    140
showRangeUIGuide: true
x:                0
y:                0


[projectile_bullet]
color:          #FFFFaa
directDamage:   60
drawType:       2
effectOnCreate: CUSTOM:cartridge, CUSTOM:smoke
frame:          4
life:           160
speed:          11
speedSpread:    3


[effect_cartridge]
alpha:                 2
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirSpeedRandom:        50
drawUnderUnits:        false
fadeInTime:            3
fadeOut:               true
hSpeed:                2
image:                 cartridge.png
imageShadow:           SHADOW:cartridge.png
life:                  100
liveAfterAttachedDies: false
physics:               true
priority:              low
scaleFrom:             0.45
scaleTo:               0.45
xOffsetRelative:       7.5
xSpeedRelative:        1.2
xSpeedRelativeRandom:  0.3
yOffsetRelative:       -29
ySpeedRelativeRandom:  0.25


[effect_whoosh]
alpha:                 0.85
atmospheric:           false
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirOffset:             90
drawUnderUnits:        false
fadeInTime:            1
fadeOut:               true
image:                 whoosh.png
life:                  8
liveAfterAttachedDies: false
physics:               false
priority:              verylow
scaleFrom:             0.4
scaleTo:               0.45
xOffsetRelative:       4
xSpeedRelative:        -0.85
yOffsetRelative:       -15
ySpeedRelativeRandom:  0.01


[effect_smoke]
alpha:                 1
atmospheric:           true
attachedToUnit:        false
color:                 #FFFFFF
createWhenZoomedOut:   false
dirOffsetRandom:       180
drawUnderUnits:        false
fadeInTime:            2
fadeOut:               true
frameIndex:            0
hSpeed:                0.2
life:                  90
liveAfterAttachedDies: false
priority:              verylow
scaleFrom:             0.3
scaleTo:               0.6
spawnChance:           0.75
stripIndex:            smoke_black
xSpeedRelativeRandom:  0.4


[effect_sparks]
atmospheric:          true
attachedToUnit:       true
color:                #FFFFFF
dirSpeedRandom:       5
hOffset:              2
hSpeed:               -0.2
image:                ROOT:shared/energy_spark.png
life:                 55
physics:              true
physicsGravity:       -0.2
priority:             verylow
scaleFrom:            0.2
scaleTo:              0.5
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6


[movement]
maxTurnSpeed:           5.0
moveAccelerationSpeed:  0.07
moveDecelerationSpeed:  0.17
moveIgnoringBody:       false
moveSlidingMode:        false
moveSpeed:              0.6
reverseSpeedPercentage: 1
turnAcceleration:       0.5


[ai]
buildPriority:           0.9
maxEachBase:             3 
noneInBaseExtraPriority: 0.4

