
[core]
@memory ewsprot:      number
#availableInDemo:     true
#exit_dirOffset:      0
#exit_x:              0
#exit_y:              10
buildSpeed:           0.001
class:                CustomUnitMetadata
copyFrom:             ROOT:effects.template, ROOT:data\_transportSlot.template, ROOT:statusEffect.template, ROOT:/DATA/total/debuffs.template
displayDescription:   - Transports up to 4 units\n- Cannot attack
displayText:          Dropship
exit_moveAwayAmount:  20
isBio:                false
mass:                 16000
maxHp:                500
maxTransportingUnits: 4
name:                 c_dropship
overrideAndReplace:   dropShip
price:                1000
radius:               20
softCollisionOnAll:   3
tags:                 mech, unit, M
techLevel:            2


# ALLEGEDLY USELESS CODE VVV
[action_slot1]
@copyFromSection: template_unitLoad
@define slotId:   0


[action_slot2]
@copyFromSection: template_unitLoad
@define slotId:   1


[action_slot3]
@copyFromSection: template_unitLoad
@define slotId:   2


[action_slot4]
@copyFromSection: template_unitLoad
@define slotId:   3
# ALLEGEDLY USELESS CODE ^^^


# Air Transport Move Penalty
[hiddenAction_preventews]
autoTriggerOnEvent: tookDamage()
requireConditional: if eventSource.tags(includes='capmid')
setUnitMemory:      ewsprot = memory.ewsprot + 1
temporarilyAddTags: preventews


[hiddenAction_allowdebuff]
autoTriggerOnEvent:    tookDamage()
requireConditional:    if not eventSource.tags(includes='capmid')
setUnitMemory:         ewsprot = 0
temporarilyRemoveTags: preventews


[hiddenAction_penalty]
autoTriggerOnEvent: tookDamage()
requireConditional: if not self.tags(includes='AirTransportPenalty') and not self.tags(includes='Shocked') and not self.tags(includes="preventews")
setUnitStats:       moveSpeed-=${movement.moveSpeed}*0.6
temporarilyAddTags: AirTransportPenalty


[hiddenAction_DebuffconcusDeactivate]
autoTrigger:           if not self.hasTakenDamage(withinSeconds=3) or memory.ewsprot >=3
requireConditional:    if self.tags(includes='AirTransportPenalty') and not self.tags(includes='Shocked')
setUnitMemory:         ewsprot = 0
setUnitStats:          moveSpeed=${movement.moveSpeed}
temporarilyRemoveTags: AirTransportPenalty
# 60% Speed Reduction


[graphics]
image_shadow:       AUTO
image_turret:       NONE
image_wreak:        dropship_dead.png
image:              dropship.png
movementEffect:     CUSTOM:trailDropship, CUSTOM:trailDropship2
movementEffectRate: 1
shadowOffsetX:      1
shadowOffsetY:      1
total_frames:       1


[attack]
canAttack:                false
canAttackFlyingUnits:     false
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
maxAttackRange:           0
shootDelay:               0


[movement]
landOnGround:           true
maxTurnSpeed:           1.4
moveAccelerationSpeed:  0.05
moveDecelerationSpeed:  0.1
movementType:           AIR
moveSpeed:              2
reverseSpeedPercentage: 0
slowDeathFall:          true
targetHeight:           35
targetHeightDrift:      1
turnAcceleration:       0.5

