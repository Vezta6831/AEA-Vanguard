
[core]
autoTriggerCooldownTime: 2s
class:                   CustomUnitMetadata
copyFrom:                ROOT:effects.template,ROOT:/DATA/total/debuffs.template
mass:                    1
maxHp:                   1
name:                    experimentalTankAATurret
price:                   1
radius:                  0
showInEditor:            false
showOnMinimap:           false
tags:                    closed, exp, unit, mech, L
techLevel:               1


[action_openHatchTrigger]
alsoQueueAction: openHatch


[hiddenAction_openHatch]
addResources:               setFlag=0
buildSpeed:                 0.7s
convertTo:                  experimentalTankAATurretOpen
whenBuilding_playAnimation: openingHatch


[action_closeHatchTrigger]
addResources:    unsetFlag=0
alsoQueueAction: closeHatch
autoTrigger:     if numberOfUnitsInEnemyTeam(lessThan=1, withinRange=310) and self.hasFlag(id=0)


[hiddenAction_closeHatch]
buildSpeed:                 0.7s
convertTo:                  experimentalTankAATurret
whenBuilding_playAnimation: closingHatch


[animation_openingHatch]
body_0.1s: {frame: 1}
body_0.2s: {frame: 2}
body_0.3s: {frame: 3}
body_0.4s: {frame: 4}
body_0.5s: {frame: 5}
body_0.6s: {frame: 6}
body_0.7s: {frame: 7}


[animation_closingHatch]
body_0.1s: {frame: 1}
body_0.2s: {frame: 2}
body_0.3s: {frame: 3}
body_0.4s: {frame: 4}
body_0.5s: {frame: 5}
body_0.6s: {frame: 6}
body_0.7s: {frame: 7}


[graphics]
image_turret: NONE
image_wreak:  NONE
image:        aa_turret_door.png
imageScale:   1.14
total_frames: 8


[attack]
canAttack:                true
canAttackFlyingUnits:     true
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
maxAttackRange:           310
shootDelay:               160
turretMultiTargeting:     true
turretSize:               0
turretTurnSpeed:          99


[turret_blank]
delay:                  2s
onShoot_triggerActions: openHatchTrigger
projectile:             blank
x:                      0
y:                      0


[projectile_blank]
directDamage:  0
explodeEffect: NONE
life:          0
speed:         0


[turret_antiair1]
canAttackFlyingUnits:     true
canAttackLandUnits:       false
canAttackUnderwaterUnits: false
canShoot:                 false
invisible:                true
projectile:               3
shoot_flame:              NONE
shoot_light:              #FFEECCCC
shoot_sound_vol:          0.3
shoot_sound:              missile_fire
size:                     0
turnSpeed:                2000
turnSpeedAcceleration:    1
x:                        0
y:                        0


[turret_antiair2]
canShoot:            false
copyFrom:            antiair1
linkDelayWithTurret: antiair1
warmup:              15
x:                   0
y:                   0


# Missle
[projectile_3]
#ballistic_delaymove_height:   25
#ballistic_height:             25
#ballistic:                    true
areaDamage:                    75
areaRadius:                    30
color:                         #fff7ff1d
drawSize:                      1
explodeEffect:                 shockwave, CUSTOM:lightGround, smallExplosion
frame:                         4
gravity:                       98
initialUnguidedSpeedHeight:    100
largeHitEffect:                true
life:                          190
lightColor:                    #f7ff1d
lightSize:                     0.5
mutatorX_changedExplodeEffect: smallExplosion, CUSTOM:bits*2
mutatorX_ifUnitWithTags:       airUnit
speed:                         2
targetSpeed:                   6
trailEffect:                   CUSTOM:missileFlare1, CUSTOM:projectileSmoke
trailEffectRate:               2


[effect_dirtyExplosion]
alsoEmitEffects:      CUSTOM:lightGround, CUSTOM:dirt, shockwave, CUSTOM:dirtySmoke, smallExplosion
createWhenOverLiquid: false
life:                 0


[effect_waterSplash]
alsoEmitEffects: CUSTOM:wave, CUSTOM:waterSplash1, CUSTOM:waterSplash2, CUSTOM:waterSplash3, CUSTOM:waterSplash4*3, CUSTOM:waterSplash5*5
life:            0


[effect_missileFlare1]
@define                  missileFlareSize: 0.1
alwayStartDirAtZero:     true
ifSpawnFailsEmitEffects: CUSTOM:missileFlare2
image:                   ROOT:shared/yellow_flare.png
life:                    10
lifeRandom:              5
scaleFrom:               ${missileFlareSize}
scaleTo:                 ${missileFlareSize}
spawnChance:             0.25
yOffsetRelative:         -3.5


[movement]
maxTurnSpeed:           0
moveAccelerationSpeed:  0
moveDecelerationSpeed:  0
moveIgnoringBody:       false
movementType:           LAND
moveSlidingMode:        false
moveSpeed:              0
reverseSpeedPercentage: 1
turnAcceleration:       0

